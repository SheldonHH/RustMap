{"type": "source_file", "children": [{"type": "use_declaration", "children": [{"type": "use", "children": [], "start_byte": 0, "end_byte": 3, "start_point": [0, 0], "end_point": [0, 3], "text": "use"}, {"type": "scoped_identifier", "children": [{"type": "identifier", "children": [], "start_byte": 4, "end_byte": 7, "start_point": [0, 4], "end_point": [0, 7], "text": "std"}, {"type": "::", "children": [], "start_byte": 7, "end_byte": 9, "start_point": [0, 7], "end_point": [0, 9], "text": "::"}, {"type": "identifier", "children": [], "start_byte": 9, "end_byte": 11, "start_point": [0, 9], "end_point": [0, 11], "text": "fs"}], "start_byte": 4, "end_byte": 11, "start_point": [0, 4], "end_point": [0, 11], "text": "std::fs"}, {"type": ";", "children": [], "start_byte": 11, "end_byte": 12, "start_point": [0, 11], "end_point": [0, 12], "text": ";"}], "start_byte": 0, "end_byte": 12, "start_point": [0, 0], "end_point": [0, 12], "text": "use std::fs;"}, {"type": "use_declaration", "children": [{"type": "use", "children": [], "start_byte": 13, "end_byte": 16, "start_point": [1, 0], "end_point": [1, 3], "text": "use"}, {"type": "scoped_identifier", "children": [{"type": "scoped_identifier", "children": [{"type": "scoped_identifier", "children": [{"type": "scoped_identifier", "children": [{"type": "identifier", "children": [], "start_byte": 17, "end_byte": 20, "start_point": [1, 4], "end_point": [1, 7], "text": "std"}, {"type": "::", "children": [], "start_byte": 20, "end_byte": 22, "start_point": [1, 7], "end_point": [1, 9], "text": "::"}, {"type": "identifier", "children": [], "start_byte": 22, "end_byte": 24, "start_point": [1, 9], "end_point": [1, 11], "text": "os"}], "start_byte": 17, "end_byte": 24, "start_point": [1, 4], "end_point": [1, 11], "text": "std::os"}, {"type": "::", "children": [], "start_byte": 24, "end_byte": 26, "start_point": [1, 11], "end_point": [1, 13], "text": "::"}, {"type": "identifier", "children": [], "start_byte": 26, "end_byte": 30, "start_point": [1, 13], "end_point": [1, 17], "text": "unix"}], "start_byte": 17, "end_byte": 30, "start_point": [1, 4], "end_point": [1, 17], "text": "std::os::unix"}, {"type": "::", "children": [], "start_byte": 30, "end_byte": 32, "start_point": [1, 17], "end_point": [1, 19], "text": "::"}, {"type": "identifier", "children": [], "start_byte": 32, "end_byte": 34, "start_point": [1, 19], "end_point": [1, 21], "text": "fs"}], "start_byte": 17, "end_byte": 34, "start_point": [1, 4], "end_point": [1, 21], "text": "std::os::unix::fs"}, {"type": "::", "children": [], "start_byte": 34, "end_byte": 36, "start_point": [1, 21], "end_point": [1, 23], "text": "::"}, {"type": "identifier", "children": [], "start_byte": 36, "end_byte": 47, "start_point": [1, 23], "end_point": [1, 34], "text": "MetadataExt"}], "start_byte": 17, "end_byte": 47, "start_point": [1, 4], "end_point": [1, 34], "text": "std::os::unix::fs::MetadataExt"}, {"type": ";", "children": [], "start_byte": 47, "end_byte": 48, "start_point": [1, 34], "end_point": [1, 35], "text": ";"}], "start_byte": 13, "end_byte": 48, "start_point": [1, 0], "end_point": [1, 35], "text": "use std::os::unix::fs::MetadataExt;"}, {"type": "line_comment", "children": [], "start_byte": 49, "end_byte": 97, "start_point": [2, 0], "end_point": [2, 48], "text": "// \u7edf\u8ba1\u4e00\u4e2a\u6587\u4ef6\u6216\u76ee\u5f55\u7684\u786c\u94fe\u63a5\u6570\u91cf\n// \u53c2\u6570: name - \u9700\u8981\u7edf\u8ba1\u7684\u6587\u4ef6\u6216\u76ee\u5f55\u7684\u540d\u5b57\n/"}, {"type": "line_comment", "children": [], "start_byte": 98, "end_byte": 155, "start_point": [3, 0], "end_point": [3, 57], "text": " \u8fd4\u56de\u503c: \u786c\u94fe\u63a5\u6570\u91cf\uff08\u51cf\u53bb\u6587\u4ef6\u672c\u8eab\u7684\u4e00\u4e2a\u94fe\u63a5\uff09\npub fn count_hard_links(name: &s"}, {"type": "line_comment", "children": [], "start_byte": 156, "end_byte": 224, "start_point": [4, 0], "end_point": [4, 68], "text": "r) -> i32 {\n    match fs::metadata(name) {\n        Ok(metadata) => ("}, {"type": "function_item", "children": [{"type": "visibility_modifier", "children": [{"type": "pub", "children": [], "start_byte": 225, "end_byte": 228, "start_point": [5, 0], "end_point": [5, 3], "text": "eta"}], "start_byte": 225, "end_byte": 228, "start_point": [5, 0], "end_point": [5, 3], "text": "eta"}, {"type": "fn", "children": [], "start_byte": 229, "end_byte": 231, "start_point": [5, 4], "end_point": [5, 6], "text": "at"}, {"type": "identifier", "children": [], "start_byte": 232, "end_byte": 248, "start_point": [5, 7], "end_point": [5, 23], "text": ".nlink() as i32)"}, {"type": "parameters", "children": [{"type": "(", "children": [], "start_byte": 248, "end_byte": 249, "start_point": [5, 23], "end_point": [5, 24], "text": " "}, {"type": "parameter", "children": [{"type": "identifier", "children": [], "start_byte": 249, "end_byte": 253, "start_point": [5, 24], "end_point": [5, 28], "text": "- 1,"}, {"type": ":", "children": [], "start_byte": 253, "end_byte": 254, "start_point": [5, 28], "end_point": [5, 29], "text": "\n"}, {"type": "reference_type", "children": [{"type": "&", "children": [], "start_byte": 255, "end_byte": 256, "start_point": [5, 30], "end_point": [5, 31], "text": " "}, {"type": "primitive_type", "children": [], "start_byte": 256, "end_byte": 259, "start_point": [5, 31], "end_point": [5, 34], "text": "   "}], "start_byte": 255, "end_byte": 259, "start_point": [5, 30], "end_point": [5, 34], "text": "    "}], "start_byte": 249, "end_byte": 259, "start_point": [5, 24], "end_point": [5, 34], "text": "- 1,\n     "}, {"type": ")", "children": [], "start_byte": 259, "end_byte": 260, "start_point": [5, 34], "end_point": [5, 35], "text": " "}], "start_byte": 248, "end_byte": 260, "start_point": [5, 23], "end_point": [5, 35], "text": " - 1,\n      "}, {"type": "->", "children": [], "start_byte": 261, "end_byte": 263, "start_point": [5, 36], "end_point": [5, 38], "text": " E"}, {"type": "primitive_type", "children": [], "start_byte": 264, "end_byte": 267, "start_point": [5, 39], "end_point": [5, 42], "text": "r(_"}, {"type": "block", "children": [{"type": "{", "children": [], "start_byte": 268, "end_byte": 269, "start_point": [5, 43], "end_point": [5, 44], "text": " "}, {"type": "expression_statement", "children": [{"type": "match_expression", "children": [{"type": "match", "children": [], "start_byte": 274, "end_byte": 279, "start_point": [6, 4], "end_point": [6, 9], "text": "\n    "}, {"type": "call_expression", "children": [{"type": "scoped_identifier", "children": [{"type": "identifier", "children": [], "start_byte": 280, "end_byte": 282, "start_point": [6, 10], "end_point": [6, 12], "text": "\n}"}, {"type": "::", "children": [], "start_byte": 282, "end_byte": 284, "start_point": [6, 12], "end_point": [6, 14], "text": "\n\n"}, {"type": "identifier", "children": [], "start_byte": 284, "end_byte": 292, "start_point": [6, 14], "end_point": [6, 22], "text": "#[cfg(te"}], "start_byte": 280, "end_byte": 292, "start_point": [6, 10], "end_point": [6, 22], "text": "\n}\n\n#[cfg(te"}, {"type": "arguments", "children": [{"type": "(", "children": [], "start_byte": 292, "end_byte": 293, "start_point": [6, 22], "end_point": [6, 23], "text": "s"}, {"type": "identifier", "children": [], "start_byte": 293, "end_byte": 297, "start_point": [6, 23], "end_point": [6, 27], "text": "t)]\n"}, {"type": ")", "children": [], "start_byte": 297, "end_byte": 298, "start_point": [6, 27], "end_point": [6, 28], "text": "m"}], "start_byte": 292, "end_byte": 298, "start_point": [6, 22], "end_point": [6, 28], "text": "st)]\nm"}], "start_byte": 280, "end_byte": 298, "start_point": [6, 10], "end_point": [6, 28], "text": "\n}\n\n#[cfg(test)]\nm"}, {"type": "match_block", "children": [{"type": "{", "children": [], "start_byte": 299, "end_byte": 300, "start_point": [6, 29], "end_point": [6, 30], "text": "d"}, {"type": "match_arm", "children": [{"type": "match_pattern", "children": [{"type": "tuple_struct_pattern", "children": [{"type": "identifier", "children": [], "start_byte": 309, "end_byte": 311, "start_point": [7, 8], "end_point": [7, 10], "text": "  "}, {"type": "(", "children": [], "start_byte": 311, "end_byte": 312, "start_point": [7, 10], "end_point": [7, 11], "text": " "}, {"type": "identifier", "children": [], "start_byte": 312, "end_byte": 320, "start_point": [7, 11], "end_point": [7, 19], "text": " use sup"}, {"type": ")", "children": [], "start_byte": 320, "end_byte": 321, "start_point": [7, 19], "end_point": [7, 20], "text": "e"}], "start_byte": 309, "end_byte": 321, "start_point": [7, 8], "end_point": [7, 20], "text": "    use supe"}], "start_byte": 309, "end_byte": 321, "start_point": [7, 8], "end_point": [7, 20], "text": "    use supe"}, {"type": "=>", "children": [], "start_byte": 322, "end_byte": 324, "start_point": [7, 21], "end_point": [7, 23], "text": "::"}, {"type": "binary_expression", "children": [{"type": "parenthesized_expression", "children": [{"type": "(", "children": [], "start_byte": 325, "end_byte": 326, "start_point": [7, 24], "end_point": [7, 25], "text": ";"}, {"type": "type_cast_expression", "children": [{"type": "call_expression", "children": [{"type": "field_expression", "children": [{"type": "identifier", "children": [], "start_byte": 326, "end_byte": 334, "start_point": [7, 25], "end_point": [7, 33], "text": "\n    use"}, {"type": ".", "children": [], "start_byte": 334, "end_byte": 335, "start_point": [7, 33], "end_point": [7, 34], "text": " "}, {"type": "field_identifier", "children": [], "start_byte": 335, "end_byte": 340, "start_point": [7, 34], "end_point": [7, 39], "text": "std::"}], "start_byte": 326, "end_byte": 340, "start_point": [7, 25], "end_point": [7, 39], "text": "\n    use std::"}, {"type": "arguments", "children": [{"type": "(", "children": [], "start_byte": 340, "end_byte": 341, "start_point": [7, 39], "end_point": [7, 40], "text": "f"}, {"type": ")", "children": [], "start_byte": 341, "end_byte": 342, "start_point": [7, 40], "end_point": [7, 41], "text": "s"}], "start_byte": 340, "end_byte": 342, "start_point": [7, 39], "end_point": [7, 41], "text": "fs"}], "start_byte": 326, "end_byte": 342, "start_point": [7, 25], "end_point": [7, 41], "text": "\n    use std::fs"}, {"type": "as", "children": [], "start_byte": 343, "end_byte": 345, "start_point": [7, 42], "end_point": [7, 44], "text": ":F"}, {"type": "primitive_type", "children": [], "start_byte": 346, "end_byte": 349, "start_point": [7, 45], "end_point": [7, 48], "text": "le;"}], "start_byte": 326, "end_byte": 349, "start_point": [7, 25], "end_point": [7, 48], "text": "\n    use std::fs::File;"}, {"type": ")", "children": [], "start_byte": 349, "end_byte": 350, "start_point": [7, 48], "end_point": [7, 49], "text": "\n"}], "start_byte": 325, "end_byte": 350, "start_point": [7, 24], "end_point": [7, 49], "text": ";\n    use std::fs::File;\n"}, {"type": "-", "children": [], "start_byte": 351, "end_byte": 352, "start_point": [7, 50], "end_point": [7, 51], "text": " "}, {"type": "integer_literal", "children": [], "start_byte": 353, "end_byte": 354, "start_point": [7, 52], "end_point": [7, 53], "text": " "}], "start_byte": 325, "end_byte": 354, "start_point": [7, 24], "end_point": [7, 53], "text": ";\n    use std::fs::File;\n\n   "}, {"type": ",", "children": [], "start_byte": 354, "end_byte": 355, "start_point": [7, 53], "end_point": [7, 54], "text": " "}], "start_byte": 309, "end_byte": 355, "start_point": [7, 8], "end_point": [7, 54], "text": "    use super::*;\n    use std::fs::File;\n\n    "}, {"type": "match_arm", "children": [{"type": "match_pattern", "children": [{"type": "tuple_struct_pattern", "children": [{"type": "identifier", "children": [], "start_byte": 364, "end_byte": 367, "start_point": [8, 8], "end_point": [8, 11], "text": "   "}, {"type": "(", "children": [], "start_byte": 367, "end_byte": 368, "start_point": [8, 11], "end_point": [8, 12], "text": "f"}, {"type": "_", "children": [], "start_byte": 368, "end_byte": 369, "start_point": [8, 12], "end_point": [8, 13], "text": "n"}, {"type": ")", "children": [], "start_byte": 369, "end_byte": 370, "start_point": [8, 13], "end_point": [8, 14], "text": " "}], "start_byte": 364, "end_byte": 370, "start_point": [8, 8], "end_point": [8, 14], "text": "   fn "}], "start_byte": 364, "end_byte": 370, "start_point": [8, 8], "end_point": [8, 14], "text": "   fn "}, {"type": "=>", "children": [], "start_byte": 371, "end_byte": 373, "start_point": [8, 15], "end_point": [8, 17], "text": "es"}, {"type": "integer_literal", "children": [], "start_byte": 374, "end_byte": 375, "start_point": [8, 18], "end_point": [8, 19], "text": "_"}, {"type": ",", "children": [], "start_byte": 375, "end_byte": 376, "start_point": [8, 19], "end_point": [8, 20], "text": "c"}], "start_byte": 364, "end_byte": 376, "start_point": [8, 8], "end_point": [8, 20], "text": "   fn test_c"}, {"type": "}", "children": [], "start_byte": 381, "end_byte": 382, "start_point": [9, 4], "end_point": [9, 5], "text": "h"}], "start_byte": 299, "end_byte": 382, "start_point": [6, 29], "end_point": [9, 5], "text": "d tests {\n    use super::*;\n    use std::fs::File;\n\n    #[test]\n    fn test_count_h"}], "start_byte": 274, "end_byte": 382, "start_point": [6, 4], "end_point": [9, 5], "text": "\n    }\n}\n\n#[cfg(test)]\nmod tests {\n    use super::*;\n    use std::fs::File;\n\n    #[test]\n    fn test_count_h"}], "start_byte": 274, "end_byte": 382, "start_point": [6, 4], "end_point": [9, 5], "text": "\n    }\n}\n\n#[cfg(test)]\nmod tests {\n    use super::*;\n    use std::fs::File;\n\n    #[test]\n    fn test_count_h"}, {"type": "}", "children": [], "start_byte": 383, "end_byte": 384, "start_point": [10, 0], "end_point": [10, 1], "text": "r"}], "start_byte": 268, "end_byte": 384, "start_point": [5, 43], "end_point": [10, 1], "text": " => 0,\n    }\n}\n\n#[cfg(test)]\nmod tests {\n    use super::*;\n    use std::fs::File;\n\n    #[test]\n    fn test_count_har"}], "start_byte": 225, "end_byte": 384, "start_point": [5, 0], "end_point": [10, 1], "text": "etadata.nlink() as i32) - 1,\n        Err(_) => 0,\n    }\n}\n\n#[cfg(test)]\nmod tests {\n    use super::*;\n    use std::fs::File;\n\n    #[test]\n    fn test_count_har"}, {"type": "attribute_item", "children": [{"type": "#", "children": [], "start_byte": 386, "end_byte": 387, "start_point": [12, 0], "end_point": [12, 1], "text": "l"}, {"type": "[", "children": [], "start_byte": 387, "end_byte": 388, "start_point": [12, 1], "end_point": [12, 2], "text": "i"}, {"type": "attribute", "children": [{"type": "identifier", "children": [], "start_byte": 388, "end_byte": 391, "start_point": [12, 2], "end_point": [12, 5], "text": "nks"}, {"type": "token_tree", "children": [{"type": "(", "children": [], "start_byte": 391, "end_byte": 392, "start_point": [12, 5], "end_point": [12, 6], "text": "("}, {"type": "identifier", "children": [], "start_byte": 392, "end_byte": 396, "start_point": [12, 6], "end_point": [12, 10], "text": ") {\n"}, {"type": ")", "children": [], "start_byte": 396, "end_byte": 397, "start_point": [12, 10], "end_point": [12, 11], "text": " "}], "start_byte": 391, "end_byte": 397, "start_point": [12, 5], "end_point": [12, 11], "text": "() {\n "}], "start_byte": 388, "end_byte": 397, "start_point": [12, 2], "end_point": [12, 11], "text": "nks() {\n "}, {"type": "]", "children": [], "start_byte": 397, "end_byte": 398, "start_point": [12, 11], "end_point": [12, 12], "text": " "}], "start_byte": 386, "end_byte": 398, "start_point": [12, 0], "end_point": [12, 12], "text": "links() {\n  "}, {"type": "mod_item", "children": [{"type": "mod", "children": [], "start_byte": 399, "end_byte": 402, "start_point": [13, 0], "end_point": [13, 3], "text": "   "}, {"type": "identifier", "children": [], "start_byte": 403, "end_byte": 408, "start_point": [13, 4], "end_point": [13, 9], "text": " // \u6e05"}, {"type": "declaration_list", "children": [{"type": "{", "children": [], "start_byte": 409, "end_byte": 410, "start_point": [13, 10], "end_point": [13, 11], "text": "\u73b0"}, {"type": "use_declaration", "children": [{"type": "use", "children": [], "start_byte": 415, "end_byte": 418, "start_point": [14, 4], "end_point": [14, 7], "text": "   "}, {"type": "use_wildcard", "children": [{"type": "super", "children": [], "start_byte": 419, "end_byte": 424, "start_point": [14, 8], "end_point": [14, 13], "text": "    l"}, {"type": "::", "children": [], "start_byte": 424, "end_byte": 426, "start_point": [14, 13], "end_point": [14, 15], "text": "et"}, {"type": "*", "children": [], "start_byte": 426, "end_byte": 427, "start_point": [14, 15], "end_point": [14, 16], "text": " "}], "start_byte": 419, "end_byte": 427, "start_point": [14, 8], "end_point": [14, 16], "text": "    let "}, {"type": ";", "children": [], "start_byte": 427, "end_byte": 428, "start_point": [14, 16], "end_point": [14, 17], "text": "_"}], "start_byte": 415, "end_byte": 428, "start_point": [14, 4], "end_point": [14, 17], "text": "        let _"}, {"type": "use_declaration", "children": [{"type": "use", "children": [], "start_byte": 433, "end_byte": 436, "start_point": [15, 4], "end_point": [15, 7], "text": "::r"}, {"type": "scoped_identifier", "children": [{"type": "scoped_identifier", "children": [{"type": "identifier", "children": [], "start_byte": 437, "end_byte": 440, "start_point": [15, 8], "end_point": [15, 11], "text": "mov"}, {"type": "::", "children": [], "start_byte": 440, "end_byte": 442, "start_point": [15, 11], "end_point": [15, 13], "text": "e_"}, {"type": "identifier", "children": [], "start_byte": 442, "end_byte": 444, "start_point": [15, 13], "end_point": [15, 15], "text": "fi"}], "start_byte": 437, "end_byte": 444, "start_point": [15, 8], "end_point": [15, 15], "text": "move_fi"}, {"type": "::", "children": [], "start_byte": 444, "end_byte": 446, "start_point": [15, 15], "end_point": [15, 17], "text": "le"}, {"type": "identifier", "children": [], "start_byte": 446, "end_byte": 450, "start_point": [15, 17], "end_point": [15, 21], "text": "(\"te"}], "start_byte": 437, "end_byte": 450, "start_point": [15, 8], "end_point": [15, 21], "text": "move_file(\"te"}, {"type": ";", "children": [], "start_byte": 450, "end_byte": 451, "start_point": [15, 21], "end_point": [15, 22], "text": "m"}], "start_byte": 433, "end_byte": 451, "start_point": [15, 4], "end_point": [15, 22], "text": "::remove_file(\"tem"}, {"type": "attribute_item", "children": [{"type": "#", "children": [], "start_byte": 457, "end_byte": 458, "start_point": [17, 4], "end_point": [17, 5], "text": "\""}, {"type": "[", "children": [], "start_byte": 458, "end_byte": 459, "start_point": [17, 5], "end_point": [17, 6], "text": ")"}, {"type": "attribute", "children": [{"type": "identifier", "children": [], "start_byte": 459, "end_byte": 463, "start_point": [17, 6], "end_point": [17, 10], "text": ";\n  "}], "start_byte": 459, "end_byte": 463, "start_point": [17, 6], "end_point": [17, 10], "text": ";\n  "}, {"type": "]", "children": [], "start_byte": 463, "end_byte": 464, "start_point": [17, 10], "end_point": [17, 11], "text": " "}], "start_byte": 457, "end_byte": 464, "start_point": [17, 4], "end_point": [17, 11], "text": "\");\n   "}, {"type": "function_item", "children": [{"type": "fn", "children": [], "start_byte": 469, "end_byte": 471, "start_point": [18, 4], "end_point": [18, 6], "text": "le"}, {"type": "identifier", "children": [], "start_byte": 472, "end_byte": 493, "start_point": [18, 7], "end_point": [18, 28], "text": " _ = fs::remove_file("}, {"type": "parameters", "children": [{"type": "(", "children": [], "start_byte": 493, "end_byte": 494, "start_point": [18, 28], "end_point": [18, 29], "text": "\""}, {"type": ")", "children": [], "start_byte": 494, "end_byte": 495, "start_point": [18, 29], "end_point": [18, 30], "text": "t"}], "start_byte": 493, "end_byte": 495, "start_point": [18, 28], "end_point": [18, 30], "text": "\"t"}, {"type": "block", "children": [{"type": "{", "children": [], "start_byte": 496, "end_byte": 497, "start_point": [18, 31], "end_point": [18, 32], "text": "m"}, {"type": "line_comment", "children": [], "start_byte": 506, "end_byte": 530, "start_point": [19, 8], "end_point": [19, 32], "text": "nk\");\n\n        // \u521b\u5efa\u4e00\u4e2a\u4e34\u65f6"}, {"type": "let_declaration", "children": [{"type": "let", "children": [], "start_byte": 539, "end_byte": 542, "start_point": [20, 8], "end_point": [20, 11], "text": "\u6570\n "}, {"type": "_", "children": [], "start_byte": 543, "end_byte": 544, "start_point": [20, 12], "end_point": [20, 13], "text": " "}, {"type": "=", "children": [], "start_byte": 545, "end_byte": 546, "start_point": [20, 14], "end_point": [20, 15], "text": " "}, {"type": "call_expression", "children": [{"type": "scoped_identifier", "children": [{"type": "identifier", "children": [], "start_byte": 547, "end_byte": 549, "start_point": [20, 16], "end_point": [20, 18], "text": "  "}, {"type": "::", "children": [], "start_byte": 549, "end_byte": 551, "start_point": [20, 18], "end_point": [20, 20], "text": "Fi"}, {"type": "identifier", "children": [], "start_byte": 551, "end_byte": 562, "start_point": [20, 20], "end_point": [20, 31], "text": "le::create("}], "start_byte": 547, "end_byte": 562, "start_point": [20, 16], "end_point": [20, 31], "text": "  File::create("}, {"type": "arguments", "children": [{"type": "(", "children": [], "start_byte": 562, "end_byte": 563, "start_point": [20, 31], "end_point": [20, 32], "text": "\""}, {"type": "string_literal", "children": [{"type": "\"", "children": [], "start_byte": 563, "end_byte": 564, "start_point": [20, 32], "end_point": [20, 33], "text": "t"}, {"type": "\"", "children": [], "start_byte": 573, "end_byte": 574, "start_point": [20, 42], "end_point": [20, 43], "text": ")"}], "start_byte": 563, "end_byte": 574, "start_point": [20, 32], "end_point": [20, 43], "text": "temp_file\")"}, {"type": ")", "children": [], "start_byte": 574, "end_byte": 575, "start_point": [20, 43], "end_point": [20, 44], "text": "."}], "start_byte": 562, "end_byte": 575, "start_point": [20, 31], "end_point": [20, 44], "text": "\"temp_file\")."}], "start_byte": 547, "end_byte": 575, "start_point": [20, 16], "end_point": [20, 44], "text": "  File::create(\"temp_file\")."}, {"type": ";", "children": [], "start_byte": 575, "end_byte": 576, "start_point": [20, 44], "end_point": [20, 45], "text": "u"}], "start_byte": 539, "end_byte": 576, "start_point": [20, 8], "end_point": [20, 45], "text": "\u6570\n        File::create(\"temp_file\").u"}, {"type": "let_declaration", "children": [{"type": "let", "children": [], "start_byte": 585, "end_byte": 588, "start_point": [21, 8], "end_point": [21, 11], "text": "\n  "}, {"type": "_", "children": [], "start_byte": 589, "end_byte": 590, "start_point": [21, 12], "end_point": [21, 13], "text": " "}, {"type": "=", "children": [], "start_byte": 591, "end_byte": 592, "start_point": [21, 14], "end_point": [21, 15], "text": " "}, {"type": "call_expression", "children": [{"type": "scoped_identifier", "children": [{"type": "identifier", "children": [], "start_byte": 593, "end_byte": 595, "start_point": [21, 16], "end_point": [21, 18], "text": " /"}, {"type": "::", "children": [], "start_byte": 595, "end_byte": 597, "start_point": [21, 18], "end_point": [21, 20], "text": "/ "}, {"type": "identifier", "children": [], "start_byte": 597, "end_byte": 608, "start_point": [21, 20], "end_point": [21, 31], "text": "\u786e\u4fdd\u65b0\u521b\u5efa\u7684\u6587\u4ef6\u53ea\u6709\u4e00"}], "start_byte": 593, "end_byte": 608, "start_point": [21, 16], "end_point": [21, 31], "text": " // \u786e\u4fdd\u65b0\u521b\u5efa\u7684\u6587\u4ef6\u53ea\u6709\u4e00"}, {"type": "arguments", "children": [{"type": "(", "children": [], "start_byte": 608, "end_byte": 609, "start_point": [21, 31], "end_point": [21, 32], "text": "\u4e2a"}, {"type": "string_literal", "children": [{"type": "\"", "children": [], "start_byte": 609, "end_byte": 610, "start_point": [21, 32], "end_point": [21, 33], "text": "\u786c"}, {"type": "\"", "children": [], "start_byte": 624, "end_byte": 625, "start_point": [21, 47], "end_point": [21, 48], "text": "e"}], "start_byte": 609, "end_byte": 625, "start_point": [21, 32], "end_point": [21, 48], "text": "\u786c\u94fe\u63a5\n        asse"}, {"type": ")", "children": [], "start_byte": 625, "end_byte": 626, "start_point": [21, 48], "end_point": [21, 49], "text": "r"}], "start_byte": 608, "end_byte": 626, "start_point": [21, 31], "end_point": [21, 49], "text": "\u4e2a\u786c\u94fe\u63a5\n        asser"}], "start_byte": 593, "end_byte": 626, "start_point": [21, 16], "end_point": [21, 49], "text": " // \u786e\u4fdd\u65b0\u521b\u5efa\u7684\u6587\u4ef6\u53ea\u6709\u4e00\u4e2a\u786c\u94fe\u63a5\n        asser"}, {"type": ";", "children": [], "start_byte": 626, "end_byte": 627, "start_point": [21, 49], "end_point": [21, 50], "text": "t"}], "start_byte": 585, "end_byte": 627, "start_point": [21, 8], "end_point": [21, 50], "text": "\n        // \u786e\u4fdd\u65b0\u521b\u5efa\u7684\u6587\u4ef6\u53ea\u6709\u4e00\u4e2a\u786c\u94fe\u63a5\n        assert"}, {"type": "line_comment", "children": [], "start_byte": 637, "end_byte": 688, "start_point": [23, 8], "end_point": [23, 59], "text": "_hard_links(\"temp_file\"), 0);\n\n        // \u521b\u5efa\u786c\u94fe\u63a5\n   "}, {"type": "expression_statement", "children": [{"type": "call_expression", "children": [{"type": "field_expression", "children": [{"type": "call_expression", "children": [{"type": "scoped_identifier", "children": [{"type": "identifier", "children": [], "start_byte": 697, "end_byte": 701, "start_point": [24, 8], "end_point": [24, 12], "text": "hard"}, {"type": "::", "children": [], "start_byte": 701, "end_byte": 703, "start_point": [24, 12], "end_point": [24, 14], "text": "_l"}, {"type": "identifier", "children": [], "start_byte": 703, "end_byte": 709, "start_point": [24, 14], "end_point": [24, 20], "text": "ink(\"t"}], "start_byte": 697, "end_byte": 709, "start_point": [24, 8], "end_point": [24, 20], "text": "hard_link(\"t"}, {"type": "arguments", "children": [{"type": "(", "children": [], "start_byte": 709, "end_byte": 710, "start_point": [24, 20], "end_point": [24, 21], "text": "e"}, {"type": "string_literal", "children": [{"type": "\"", "children": [], "start_byte": 710, "end_byte": 711, "start_point": [24, 21], "end_point": [24, 22], "text": "m"}, {"type": "\"", "children": [], "start_byte": 720, "end_byte": 721, "start_point": [24, 31], "end_point": [24, 32], "text": "\""}], "start_byte": 710, "end_byte": 721, "start_point": [24, 21], "end_point": [24, 32], "text": "mp_file\", \""}, {"type": ")", "children": [], "start_byte": 721, "end_byte": 722, "start_point": [24, 32], "end_point": [24, 33], "text": "t"}], "start_byte": 709, "end_byte": 722, "start_point": [24, 20], "end_point": [24, 33], "text": "emp_file\", \"t"}], "start_byte": 697, "end_byte": 722, "start_point": [24, 8], "end_point": [24, 33], "text": "hard_link(\"temp_file\", \"t"}, {"type": ".", "children": [], "start_byte": 722, "end_byte": 723, "start_point": [24, 33], "end_point": [24, 34], "text": "e"}, {"type": "field_identifier", "children": [], "start_byte": 723, "end_byte": 729, "start_point": [24, 34], "end_point": [24, 40], "text": "mp_fil"}], "start_byte": 697, "end_byte": 729, "start_point": [24, 8], "end_point": [24, 40], "text": "hard_link(\"temp_file\", \"temp_fil"}, {"type": "arguments", "children": [{"type": "(", "children": [], "start_byte": 729, "end_byte": 730, "start_point": [24, 40], "end_point": [24, 41], "text": "e"}, {"type": ")", "children": [], "start_byte": 730, "end_byte": 731, "start_point": [24, 41], "end_point": [24, 42], "text": "_"}], "start_byte": 729, "end_byte": 731, "start_point": [24, 40], "end_point": [24, 42], "text": "e_"}], "start_byte": 697, "end_byte": 731, "start_point": [24, 8], "end_point": [24, 42], "text": "hard_link(\"temp_file\", \"temp_file_"}, {"type": ";", "children": [], "start_byte": 731, "end_byte": 732, "start_point": [24, 42], "end_point": [24, 43], "text": "l"}], "start_byte": 697, "end_byte": 732, "start_point": [24, 8], "end_point": [24, 43], "text": "hard_link(\"temp_file\", \"temp_file_l"}, {"type": "line_comment", "children": [], "start_byte": 742, "end_byte": 790, "start_point": [26, 8], "end_point": [26, 56], "text": "ap();  // \u8fd9\u91cc\u4f7f\u7528hard_link\n\n        // \u68c0\u67e5\u786c\u94fe\u63a5\u662f\u5426\u771f\u7684\u88ab\u521b\u5efa"}, {"type": "expression_statement", "children": [{"type": "macro_invocation", "children": [{"type": "identifier", "children": [], "start_byte": 799, "end_byte": 808, "start_point": [27, 8], "end_point": [27, 17], "text": "assert!(f"}, {"type": "!", "children": [], "start_byte": 808, "end_byte": 809, "start_point": [27, 17], "end_point": [27, 18], "text": "s"}, {"type": "token_tree", "children": [{"type": "(", "children": [], "start_byte": 809, "end_byte": 810, "start_point": [27, 18], "end_point": [27, 19], "text": ":"}, {"type": "identifier", "children": [], "start_byte": 810, "end_byte": 826, "start_point": [27, 19], "end_point": [27, 35], "text": ":metadata(\"temp_"}, {"type": "token_tree", "children": [{"type": "(", "children": [], "start_byte": 826, "end_byte": 827, "start_point": [27, 35], "end_point": [27, 36], "text": "f"}, {"type": "string_literal", "children": [{"type": "\"", "children": [], "start_byte": 827, "end_byte": 828, "start_point": [27, 36], "end_point": [27, 37], "text": "i"}, {"type": "\"", "children": [], "start_byte": 837, "end_byte": 838, "start_point": [27, 46], "end_point": [27, 47], "text": "."}], "start_byte": 827, "end_byte": 838, "start_point": [27, 36], "end_point": [27, 47], "text": "ile_link\")."}, {"type": ")", "children": [], "start_byte": 838, "end_byte": 839, "start_point": [27, 47], "end_point": [27, 48], "text": "i"}], "start_byte": 826, "end_byte": 839, "start_point": [27, 35], "end_point": [27, 48], "text": "file_link\").i"}, {"type": "integer_literal", "children": [], "start_byte": 841, "end_byte": 842, "start_point": [27, 50], "end_point": [27, 51], "text": "o"}, {"type": ")", "children": [], "start_byte": 842, "end_byte": 843, "start_point": [27, 51], "end_point": [27, 52], "text": "k"}], "start_byte": 809, "end_byte": 843, "start_point": [27, 18], "end_point": [27, 52], "text": "::metadata(\"temp_file_link\").is_ok"}], "start_byte": 799, "end_byte": 843, "start_point": [27, 8], "end_point": [27, 52], "text": "assert!(fs::metadata(\"temp_file_link\").is_ok"}, {"type": ";", "children": [], "start_byte": 843, "end_byte": 844, "start_point": [27, 52], "end_point": [27, 53], "text": "("}], "start_byte": 799, "end_byte": 844, "start_point": [27, 8], "end_point": [27, 53], "text": "assert!(fs::metadata(\"temp_file_link\").is_ok("}, {"type": "line_comment", "children": [], "start_byte": 854, "end_byte": 872, "start_point": [29, 8], "end_point": [29, 26], "text": "  assert_eq!(fs::m"}, {"type": "expression_statement", "children": [{"type": "call_expression", "children": [{"type": "field_expression", "children": [{"type": "call_expression", "children": [{"type": "scoped_identifier", "children": [{"type": "identifier", "children": [], "start_byte": 881, "end_byte": 883, "start_point": [30, 8], "end_point": [30, 10], "text": "te"}, {"type": "::", "children": [], "start_byte": 883, "end_byte": 885, "start_point": [30, 10], "end_point": [30, 12], "text": "mp"}, {"type": "identifier", "children": [], "start_byte": 885, "end_byte": 894, "start_point": [30, 12], "end_point": [30, 21], "text": "_file_lin"}], "start_byte": 881, "end_byte": 894, "start_point": [30, 8], "end_point": [30, 21], "text": "temp_file_lin"}, {"type": "arguments", "children": [{"type": "(", "children": [], "start_byte": 894, "end_byte": 895, "start_point": [30, 21], "end_point": [30, 22], "text": "k"}, {"type": "string_literal", "children": [{"type": "\"", "children": [], "start_byte": 895, "end_byte": 896, "start_point": [30, 22], "end_point": [30, 23], "text": "\""}, {"type": "\"", "children": [], "start_byte": 905, "end_byte": 906, "start_point": [30, 32], "end_point": [30, 33], "text": ")"}], "start_byte": 895, "end_byte": 906, "start_point": [30, 22], "end_point": [30, 33], "text": "\").unwrap()"}, {"type": ",", "children": [], "start_byte": 906, "end_byte": 907, "start_point": [30, 33], "end_point": [30, 34], "text": "."}, {"type": "string_literal", "children": [{"type": "\"", "children": [], "start_byte": 908, "end_byte": 909, "start_point": [30, 35], "end_point": [30, 36], "text": "l"}, {"type": "\"", "children": [], "start_byte": 923, "end_byte": 924, "start_point": [30, 50], "end_point": [30, 51], "text": "2"}], "start_byte": 908, "end_byte": 924, "start_point": [30, 35], "end_point": [30, 51], "text": "link() as i32, 2"}, {"type": ")", "children": [], "start_byte": 924, "end_byte": 925, "start_point": [30, 51], "end_point": [30, 52], "text": ")"}], "start_byte": 894, "end_byte": 925, "start_point": [30, 21], "end_point": [30, 52], "text": "k\").unwrap().nlink() as i32, 2)"}], "start_byte": 881, "end_byte": 925, "start_point": [30, 8], "end_point": [30, 52], "text": "temp_file_link\").unwrap().nlink() as i32, 2)"}, {"type": ".", "children": [], "start_byte": 925, "end_byte": 926, "start_point": [30, 52], "end_point": [30, 53], "text": ";"}, {"type": "field_identifier", "children": [], "start_byte": 926, "end_byte": 932, "start_point": [30, 53], "end_point": [30, 59], "text": "\n\n    "}], "start_byte": 881, "end_byte": 932, "start_point": [30, 8], "end_point": [30, 59], "text": "temp_file_link\").unwrap().nlink() as i32, 2);\n\n    "}, {"type": "arguments", "children": [{"type": "(", "children": [], "start_byte": 932, "end_byte": 933, "start_point": [30, 59], "end_point": [30, 60], "text": " "}, {"type": ")", "children": [], "start_byte": 933, "end_byte": 934, "start_point": [30, 60], "end_point": [30, 61], "text": " "}], "start_byte": 932, "end_byte": 934, "start_point": [30, 59], "end_point": [30, 61], "text": "  "}], "start_byte": 881, "end_byte": 934, "start_point": [30, 8], "end_point": [30, 61], "text": "temp_file_link\").unwrap().nlink() as i32, 2);\n\n      "}, {"type": ";", "children": [], "start_byte": 934, "end_byte": 935, "start_point": [30, 61], "end_point": [30, 62], "text": " "}], "start_byte": 881, "end_byte": 935, "start_point": [30, 8], "end_point": [30, 62], "text": "temp_file_link\").unwrap().nlink() as i32, 2);\n\n       "}, {"type": "line_comment", "children": [], "start_byte": 937, "end_byte": 961, "start_point": [30, 64], "end_point": [30, 88], "text": "/ \u68c0\u67e5\u786c\u94fe\u63a5\u6570\u91cf\n        assert"}, {"type": "line_comment", "children": [], "start_byte": 971, "end_byte": 1010, "start_point": [32, 8], "end_point": [32, 47], "text": "_hard_links(\"temp_file\"), 1);\n\n        "}, {"type": "expression_statement", "children": [{"type": "macro_invocation", "children": [{"type": "identifier", "children": [], "start_byte": 1019, "end_byte": 1025, "start_point": [33, 8], "end_point": [33, 14], "text": "     f"}, {"type": "!", "children": [], "start_byte": 1025, "end_byte": 1026, "start_point": [33, 14], "end_point": [33, 15], "text": "s"}, {"type": "token_tree", "children": [{"type": "(", "children": [], "start_byte": 1026, "end_byte": 1027, "start_point": [33, 15], "end_point": [33, 16], "text": ":"}, {"type": "identifier", "children": [], "start_byte": 1027, "end_byte": 1029, "start_point": [33, 16], "end_point": [33, 18], "text": ":r"}, {"type": "identifier", "children": [], "start_byte": 1031, "end_byte": 1039, "start_point": [33, 20], "end_point": [33, 28], "text": "ove_file"}, {"type": "token_tree", "children": [{"type": "(", "children": [], "start_byte": 1039, "end_byte": 1040, "start_point": [33, 28], "end_point": [33, 29], "text": "("}, {"type": "string_literal", "children": [{"type": "\"", "children": [], "start_byte": 1040, "end_byte": 1041, "start_point": [33, 29], "end_point": [33, 30], "text": "\""}, {"type": "\"", "children": [], "start_byte": 1055, "end_byte": 1056, "start_point": [33, 44], "end_point": [33, 45], "text": "\""}], "start_byte": 1040, "end_byte": 1056, "start_point": [33, 29], "end_point": [33, 45], "text": "\"temp_file_link\""}, {"type": ")", "children": [], "start_byte": 1056, "end_byte": 1057, "start_point": [33, 45], "end_point": [33, 46], "text": ")"}], "start_byte": 1039, "end_byte": 1057, "start_point": [33, 28], "end_point": [33, 46], "text": "(\"temp_file_link\")"}, {"type": "identifier", "children": [], "start_byte": 1058, "end_byte": 1063, "start_point": [33, 47], "end_point": [33, 52], "text": "unwra"}, {"type": "token_tree", "children": [{"type": "(", "children": [], "start_byte": 1063, "end_byte": 1064, "start_point": [33, 52], "end_point": [33, 53], "text": "p"}, {"type": ")", "children": [], "start_byte": 1064, "end_byte": 1065, "start_point": [33, 53], "end_point": [33, 54], "text": "("}], "start_byte": 1063, "end_byte": 1065, "start_point": [33, 52], "end_point": [33, 54], "text": "p("}, {"type": ")", "children": [], "start_byte": 1065, "end_byte": 1066, "start_point": [33, 54], "end_point": [33, 55], "text": ")"}], "start_byte": 1026, "end_byte": 1066, "start_point": [33, 15], "end_point": [33, 55], "text": "::remove_file(\"temp_file_link\").unwrap()"}], "start_byte": 1019, "end_byte": 1066, "start_point": [33, 8], "end_point": [33, 55], "text": "     fs::remove_file(\"temp_file_link\").unwrap()"}, {"type": ";", "children": [], "start_byte": 1066, "end_byte": 1067, "start_point": [33, 55], "end_point": [33, 56], "text": ";"}], "start_byte": 1019, "end_byte": 1067, "start_point": [33, 8], "end_point": [33, 56], "text": "     fs::remove_file(\"temp_file_link\").unwrap();"}, {"type": "expression_statement", "children": [{"type": "macro_invocation", "children": [{"type": "identifier", "children": [], "start_byte": 1076, "end_byte": 1085, "start_point": [34, 8], "end_point": [34, 17], "text": "fs::remov"}, {"type": "!", "children": [], "start_byte": 1085, "end_byte": 1086, "start_point": [34, 17], "end_point": [34, 18], "text": "e"}, {"type": "token_tree", "children": [{"type": "(", "children": [], "start_byte": 1086, "end_byte": 1087, "start_point": [34, 18], "end_point": [34, 19], "text": "_"}, {"type": "identifier", "children": [], "start_byte": 1087, "end_byte": 1089, "start_point": [34, 19], "end_point": [34, 21], "text": "fi"}, {"type": "identifier", "children": [], "start_byte": 1091, "end_byte": 1099, "start_point": [34, 23], "end_point": [34, 31], "text": "(\"temp_f"}, {"type": "token_tree", "children": [{"type": "(", "children": [], "start_byte": 1099, "end_byte": 1100, "start_point": [34, 31], "end_point": [34, 32], "text": "i"}, {"type": "string_literal", "children": [{"type": "\"", "children": [], "start_byte": 1100, "end_byte": 1101, "start_point": [34, 32], "end_point": [34, 33], "text": "l"}, {"type": "\"", "children": [], "start_byte": 1115, "end_byte": 1116, "start_point": [34, 47], "end_point": [34, 48], "text": " "}], "start_byte": 1100, "end_byte": 1116, "start_point": [34, 32], "end_point": [34, 48], "text": "le\").unwrap();\n "}, {"type": ")", "children": [], "start_byte": 1116, "end_byte": 1117, "start_point": [34, 48], "end_point": [34, 49], "text": " "}], "start_byte": 1099, "end_byte": 1117, "start_point": [34, 31], "end_point": [34, 49], "text": "ile\").unwrap();\n  "}, {"type": "identifier", "children": [], "start_byte": 1118, "end_byte": 1124, "start_point": [34, 50], "end_point": [34, 56], "text": " }\n}\n"}, {"type": "token_tree", "children": [{"type": "(", "children": [], "start_byte": 1124, "end_byte": 1125, "start_point": [34, 56], "end_point": [34, 57], "text": ""}, {"type": ")", "children": [], "start_byte": 1125, "end_byte": 1126, "start_point": [34, 57], "end_point": [34, 58], "text": ""}], "start_byte": 1124, "end_byte": 1126, "start_point": [34, 56], "end_point": [34, 58], "text": ""}, {"type": "identifier", "children": [], "start_byte": 1127, "end_byte": 1132, "start_point": [34, 59], "end_point": [34, 64], "text": ""}, {"type": "token_tree", "children": [{"type": "(", "children": [], "start_byte": 1132, "end_byte": 1133, "start_point": [34, 64], "end_point": [34, 65], "text": ""}, {"type": ")", "children": [], "start_byte": 1133, "end_byte": 1134, "start_point": [34, 65], "end_point": [34, 66], "text": ""}], "start_byte": 1132, "end_byte": 1134, "start_point": [34, 64], "end_point": [34, 66], "text": ""}, {"type": "as", "children": [], "start_byte": 1135, "end_byte": 1137, "start_point": [34, 67], "end_point": [34, 69], "text": ""}, {"type": "primitive_type", "children": [], "start_byte": 1138, "end_byte": 1141, "start_point": [34, 70], "end_point": [34, 73], "text": ""}, {"type": "integer_literal", "children": [], "start_byte": 1143, "end_byte": 1144, "start_point": [34, 75], "end_point": [34, 76], "text": ""}, {"type": ")", "children": [], "start_byte": 1144, "end_byte": 1145, "start_point": [34, 76], "end_point": [34, 77], "text": ""}], "start_byte": 1086, "end_byte": 1145, "start_point": [34, 18], "end_point": [34, 77], "text": "_file(\"temp_file\").unwrap();\n    }\n}\n"}], "start_byte": 1076, "end_byte": 1145, "start_point": [34, 8], "end_point": [34, 77], "text": "fs::remove_file(\"temp_file\").unwrap();\n    }\n}\n"}, {"type": ";", "children": [], "start_byte": 1145, "end_byte": 1146, "start_point": [34, 77], "end_point": [34, 78], "text": ""}], "start_byte": 1076, "end_byte": 1146, "start_point": [34, 8], "end_point": [34, 78], "text": "fs::remove_file(\"temp_file\").unwrap();\n    }\n}\n"}, {"type": "line_comment", "children": [], "start_byte": 1156, "end_byte": 1180, "start_point": [36, 8], "end_point": [36, 32], "text": ""}, {"type": "expression_statement", "children": [{"type": "macro_invocation", "children": [{"type": "identifier", "children": [], "start_byte": 1189, "end_byte": 1198, "start_point": [37, 8], "end_point": [37, 17], "text": ""}, {"type": "!", "children": [], "start_byte": 1198, "end_byte": 1199, "start_point": [37, 17], "end_point": [37, 18], "text": ""}, {"type": "token_tree", "children": [{"type": "(", "children": [], "start_byte": 1199, "end_byte": 1200, "start_point": [37, 18], "end_point": [37, 19], "text": ""}, {"type": "identifier", "children": [], "start_byte": 1200, "end_byte": 1216, "start_point": [37, 19], "end_point": [37, 35], "text": ""}, {"type": "token_tree", "children": [{"type": "(", "children": [], "start_byte": 1216, "end_byte": 1217, "start_point": [37, 35], "end_point": [37, 36], "text": ""}, {"type": "string_literal", "children": [{"type": "\"", "children": [], "start_byte": 1217, "end_byte": 1218, "start_point": [37, 36], "end_point": [37, 37], "text": ""}, {"type": "\"", "children": [], "start_byte": 1227, "end_byte": 1228, "start_point": [37, 46], "end_point": [37, 47], "text": ""}], "start_byte": 1217, "end_byte": 1228, "start_point": [37, 36], "end_point": [37, 47], "text": ""}, {"type": ")", "children": [], "start_byte": 1228, "end_byte": 1229, "start_point": [37, 47], "end_point": [37, 48], "text": ""}], "start_byte": 1216, "end_byte": 1229, "start_point": [37, 35], "end_point": [37, 48], "text": ""}, {"type": "integer_literal", "children": [], "start_byte": 1231, "end_byte": 1232, "start_point": [37, 50], "end_point": [37, 51], "text": ""}, {"type": ")", "children": [], "start_byte": 1232, "end_byte": 1233, "start_point": [37, 51], "end_point": [37, 52], "text": ""}], "start_byte": 1199, "end_byte": 1233, "start_point": [37, 18], "end_point": [37, 52], "text": ""}], "start_byte": 1189, "end_byte": 1233, "start_point": [37, 8], "end_point": [37, 52], "text": ""}, {"type": ";", "children": [], "start_byte": 1233, "end_byte": 1234, "start_point": [37, 52], "end_point": [37, 53], "text": ""}], "start_byte": 1189, "end_byte": 1234, "start_point": [37, 8], "end_point": [37, 53], "text": ""}, {"type": "line_comment", "children": [], "start_byte": 1244, "end_byte": 1253, "start_point": [39, 8], "end_point": [39, 17], "text": ""}, {"type": "expression_statement", "children": [{"type": "call_expression", "children": [{"type": "field_expression", "children": [{"type": "call_expression", "children": [{"type": "scoped_identifier", "children": [{"type": "identifier", "children": [], "start_byte": 1262, "end_byte": 1264, "start_point": [40, 8], "end_point": [40, 10], "text": ""}, {"type": "::", "children": [], "start_byte": 1264, "end_byte": 1266, "start_point": [40, 10], "end_point": [40, 12], "text": ""}, {"type": "identifier", "children": [], "start_byte": 1266, "end_byte": 1277, "start_point": [40, 12], "end_point": [40, 23], "text": ""}], "start_byte": 1262, "end_byte": 1277, "start_point": [40, 8], "end_point": [40, 23], "text": ""}, {"type": "arguments", "children": [{"type": "(", "children": [], "start_byte": 1277, "end_byte": 1278, "start_point": [40, 23], "end_point": [40, 24], "text": ""}, {"type": "string_literal", "children": [{"type": "\"", "children": [], "start_byte": 1278, "end_byte": 1279, "start_point": [40, 24], "end_point": [40, 25], "text": ""}, {"type": "\"", "children": [], "start_byte": 1293, "end_byte": 1294, "start_point": [40, 39], "end_point": [40, 40], "text": ""}], "start_byte": 1278, "end_byte": 1294, "start_point": [40, 24], "end_point": [40, 40], "text": ""}, {"type": ")", "children": [], "start_byte": 1294, "end_byte": 1295, "start_point": [40, 40], "end_point": [40, 41], "text": ""}], "start_byte": 1277, "end_byte": 1295, "start_point": [40, 23], "end_point": [40, 41], "text": ""}], "start_byte": 1262, "end_byte": 1295, "start_point": [40, 8], "end_point": [40, 41], "text": ""}, {"type": ".", "children": [], "start_byte": 1295, "end_byte": 1296, "start_point": [40, 41], "end_point": [40, 42], "text": ""}, {"type": "field_identifier", "children": [], "start_byte": 1296, "end_byte": 1302, "start_point": [40, 42], "end_point": [40, 48], "text": ""}], "start_byte": 1262, "end_byte": 1302, "start_point": [40, 8], "end_point": [40, 48], "text": ""}, {"type": "arguments", "children": [{"type": "(", "children": [], "start_byte": 1302, "end_byte": 1303, "start_point": [40, 48], "end_point": [40, 49], "text": ""}, {"type": ")", "children": [], "start_byte": 1303, "end_byte": 1304, "start_point": [40, 49], "end_point": [40, 50], "text": ""}], "start_byte": 1302, "end_byte": 1304, "start_point": [40, 48], "end_point": [40, 50], "text": ""}], "start_byte": 1262, "end_byte": 1304, "start_point": [40, 8], "end_point": [40, 50], "text": ""}, {"type": ";", "children": [], "start_byte": 1304, "end_byte": 1305, "start_point": [40, 50], "end_point": [40, 51], "text": ""}], "start_byte": 1262, "end_byte": 1305, "start_point": [40, 8], "end_point": [40, 51], "text": ""}, {"type": "expression_statement", "children": [{"type": "call_expression", "children": [{"type": "field_expression", "children": [{"type": "call_expression", "children": [{"type": "scoped_identifier", "children": [{"type": "identifier", "children": [], "start_byte": 1314, "end_byte": 1316, "start_point": [41, 8], "end_point": [41, 10], "text": ""}, {"type": "::", "children": [], "start_byte": 1316, "end_byte": 1318, "start_point": [41, 10], "end_point": [41, 12], "text": ""}, {"type": "identifier", "children": [], "start_byte": 1318, "end_byte": 1329, "start_point": [41, 12], "end_point": [41, 23], "text": ""}], "start_byte": 1314, "end_byte": 1329, "start_point": [41, 8], "end_point": [41, 23], "text": ""}, {"type": "arguments", "children": [{"type": "(", "children": [], "start_byte": 1329, "end_byte": 1330, "start_point": [41, 23], "end_point": [41, 24], "text": ""}, {"type": "string_literal", "children": [{"type": "\"", "children": [], "start_byte": 1330, "end_byte": 1331, "start_point": [41, 24], "end_point": [41, 25], "text": ""}, {"type": "\"", "children": [], "start_byte": 1340, "end_byte": 1341, "start_point": [41, 34], "end_point": [41, 35], "text": ""}], "start_byte": 1330, "end_byte": 1341, "start_point": [41, 24], "end_point": [41, 35], "text": ""}, {"type": ")", "children": [], "start_byte": 1341, "end_byte": 1342, "start_point": [41, 35], "end_point": [41, 36], "text": ""}], "start_byte": 1329, "end_byte": 1342, "start_point": [41, 23], "end_point": [41, 36], "text": ""}], "start_byte": 1314, "end_byte": 1342, "start_point": [41, 8], "end_point": [41, 36], "text": ""}, {"type": ".", "children": [], "start_byte": 1342, "end_byte": 1343, "start_point": [41, 36], "end_point": [41, 37], "text": ""}, {"type": "field_identifier", "children": [], "start_byte": 1343, "end_byte": 1349, "start_point": [41, 37], "end_point": [41, 43], "text": ""}], "start_byte": 1314, "end_byte": 1349, "start_point": [41, 8], "end_point": [41, 43], "text": ""}, {"type": "arguments", "children": [{"type": "(", "children": [], "start_byte": 1349, "end_byte": 1350, "start_point": [41, 43], "end_point": [41, 44], "text": ""}, {"type": ")", "children": [], "start_byte": 1350, "end_byte": 1351, "start_point": [41, 44], "end_point": [41, 45], "text": ""}], "start_byte": 1349, "end_byte": 1351, "start_point": [41, 43], "end_point": [41, 45], "text": ""}], "start_byte": 1314, "end_byte": 1351, "start_point": [41, 8], "end_point": [41, 45], "text": ""}, {"type": ";", "children": [], "start_byte": 1351, "end_byte": 1352, "start_point": [41, 45], "end_point": [41, 46], "text": ""}], "start_byte": 1314, "end_byte": 1352, "start_point": [41, 8], "end_point": [41, 46], "text": ""}, {"type": "}", "children": [], "start_byte": 1357, "end_byte": 1358, "start_point": [42, 4], "end_point": [42, 5], "text": ""}], "start_byte": 496, "end_byte": 1358, "start_point": [18, 31], "end_point": [42, 5], "text": "mp_file_link\");\n\n        // \u521b\u5efa\u4e00\u4e2a\u4e34\u65f6\u6587\u4ef6\u5e76\u6d4b\u8bd5\u5176\u786c\u94fe\u63a5\u6570\n        File::create(\"temp_file\").unwrap();\n\n        // \u786e\u4fdd\u65b0\u521b\u5efa\u7684\u6587\u4ef6\u53ea\u6709\u4e00\u4e2a\u786c\u94fe\u63a5\n        assert_eq!(count_hard_links(\"temp_file\"), 0);\n\n        // \u521b\u5efa\u786c\u94fe\u63a5\n        fs::hard_link(\"temp_file\", \"temp_file_link\").unwrap();  // \u8fd9\u91cc\u4f7f\u7528hard_link\n\n        // \u68c0\u67e5\u786c\u94fe\u63a5\u662f\u5426\u771f\u7684\u88ab\u521b\u5efa\n        assert!(fs::metadata(\"temp_file_link\").is_ok());\n        assert_eq!(fs::metadata(\"temp_file_link\").unwrap().nlink() as i32, 2);\n\n        // \u68c0\u67e5\u786c\u94fe\u63a5\u6570\u91cf\n        assert_eq!(count_hard_links(\"temp_file\"), 1);\n\n        // \u6e05\u7406\n        fs::remove_file(\"temp_file_link\").unwrap();\n        fs::remove_file(\"temp_file\").unwrap();\n    }\n}\n"}], "start_byte": 469, "end_byte": 1358, "start_point": [18, 4], "end_point": [42, 5], "text": "let _ = fs::remove_file(\"temp_file_link\");\n\n        // \u521b\u5efa\u4e00\u4e2a\u4e34\u65f6\u6587\u4ef6\u5e76\u6d4b\u8bd5\u5176\u786c\u94fe\u63a5\u6570\n        File::create(\"temp_file\").unwrap();\n\n        // \u786e\u4fdd\u65b0\u521b\u5efa\u7684\u6587\u4ef6\u53ea\u6709\u4e00\u4e2a\u786c\u94fe\u63a5\n        assert_eq!(count_hard_links(\"temp_file\"), 0);\n\n        // \u521b\u5efa\u786c\u94fe\u63a5\n        fs::hard_link(\"temp_file\", \"temp_file_link\").unwrap();  // \u8fd9\u91cc\u4f7f\u7528hard_link\n\n        // \u68c0\u67e5\u786c\u94fe\u63a5\u662f\u5426\u771f\u7684\u88ab\u521b\u5efa\n        assert!(fs::metadata(\"temp_file_link\").is_ok());\n        assert_eq!(fs::metadata(\"temp_file_link\").unwrap().nlink() as i32, 2);\n\n        // \u68c0\u67e5\u786c\u94fe\u63a5\u6570\u91cf\n        assert_eq!(count_hard_links(\"temp_file\"), 1);\n\n        // \u6e05\u7406\n        fs::remove_file(\"temp_file_link\").unwrap();\n        fs::remove_file(\"temp_file\").unwrap();\n    }\n}\n"}, {"type": "}", "children": [], "start_byte": 1359, "end_byte": 1360, "start_point": [43, 0], "end_point": [43, 1], "text": ""}], "start_byte": 409, "end_byte": 1360, "start_point": [13, 10], "end_point": [43, 1], "text": "\u73b0\u6709\u7684\u6587\u4ef6\n        let _ = fs::remove_file(\"temp_file\");\n        let _ = fs::remove_file(\"temp_file_link\");\n\n        // \u521b\u5efa\u4e00\u4e2a\u4e34\u65f6\u6587\u4ef6\u5e76\u6d4b\u8bd5\u5176\u786c\u94fe\u63a5\u6570\n        File::create(\"temp_file\").unwrap();\n\n        // \u786e\u4fdd\u65b0\u521b\u5efa\u7684\u6587\u4ef6\u53ea\u6709\u4e00\u4e2a\u786c\u94fe\u63a5\n        assert_eq!(count_hard_links(\"temp_file\"), 0);\n\n        // \u521b\u5efa\u786c\u94fe\u63a5\n        fs::hard_link(\"temp_file\", \"temp_file_link\").unwrap();  // \u8fd9\u91cc\u4f7f\u7528hard_link\n\n        // \u68c0\u67e5\u786c\u94fe\u63a5\u662f\u5426\u771f\u7684\u88ab\u521b\u5efa\n        assert!(fs::metadata(\"temp_file_link\").is_ok());\n        assert_eq!(fs::metadata(\"temp_file_link\").unwrap().nlink() as i32, 2);\n\n        // \u68c0\u67e5\u786c\u94fe\u63a5\u6570\u91cf\n        assert_eq!(count_hard_links(\"temp_file\"), 1);\n\n        // \u6e05\u7406\n        fs::remove_file(\"temp_file_link\").unwrap();\n        fs::remove_file(\"temp_file\").unwrap();\n    }\n}\n"}], "start_byte": 399, "end_byte": 1360, "start_point": [13, 0], "end_point": [43, 1], "text": "     // \u6e05\u7406\u73b0\u6709\u7684\u6587\u4ef6\n        let _ = fs::remove_file(\"temp_file\");\n        let _ = fs::remove_file(\"temp_file_link\");\n\n        // \u521b\u5efa\u4e00\u4e2a\u4e34\u65f6\u6587\u4ef6\u5e76\u6d4b\u8bd5\u5176\u786c\u94fe\u63a5\u6570\n        File::create(\"temp_file\").unwrap();\n\n        // \u786e\u4fdd\u65b0\u521b\u5efa\u7684\u6587\u4ef6\u53ea\u6709\u4e00\u4e2a\u786c\u94fe\u63a5\n        assert_eq!(count_hard_links(\"temp_file\"), 0);\n\n        // \u521b\u5efa\u786c\u94fe\u63a5\n        fs::hard_link(\"temp_file\", \"temp_file_link\").unwrap();  // \u8fd9\u91cc\u4f7f\u7528hard_link\n\n        // \u68c0\u67e5\u786c\u94fe\u63a5\u662f\u5426\u771f\u7684\u88ab\u521b\u5efa\n        assert!(fs::metadata(\"temp_file_link\").is_ok());\n        assert_eq!(fs::metadata(\"temp_file_link\").unwrap().nlink() as i32, 2);\n\n        // \u68c0\u67e5\u786c\u94fe\u63a5\u6570\u91cf\n        assert_eq!(count_hard_links(\"temp_file\"), 1);\n\n        // \u6e05\u7406\n        fs::remove_file(\"temp_file_link\").unwrap();\n        fs::remove_file(\"temp_file\").unwrap();\n    }\n}\n"}], "start_byte": 0, "end_byte": 1361, "start_point": [0, 0], "end_point": [44, 0], "text": "use std::fs;\nuse std::os::unix::fs::MetadataExt;\n// \u7edf\u8ba1\u4e00\u4e2a\u6587\u4ef6\u6216\u76ee\u5f55\u7684\u786c\u94fe\u63a5\u6570\u91cf\n// \u53c2\u6570: name - \u9700\u8981\u7edf\u8ba1\u7684\u6587\u4ef6\u6216\u76ee\u5f55\u7684\u540d\u5b57\n// \u8fd4\u56de\u503c: \u786c\u94fe\u63a5\u6570\u91cf\uff08\u51cf\u53bb\u6587\u4ef6\u672c\u8eab\u7684\u4e00\u4e2a\u94fe\u63a5\uff09\npub fn count_hard_links(name: &str) -> i32 {\n    match fs::metadata(name) {\n        Ok(metadata) => (metadata.nlink() as i32) - 1,\n        Err(_) => 0,\n    }\n}\n\n#[cfg(test)]\nmod tests {\n    use super::*;\n    use std::fs::File;\n\n    #[test]\n    fn test_count_hard_links() {\n        // \u6e05\u7406\u73b0\u6709\u7684\u6587\u4ef6\n        let _ = fs::remove_file(\"temp_file\");\n        let _ = fs::remove_file(\"temp_file_link\");\n\n        // \u521b\u5efa\u4e00\u4e2a\u4e34\u65f6\u6587\u4ef6\u5e76\u6d4b\u8bd5\u5176\u786c\u94fe\u63a5\u6570\n        File::create(\"temp_file\").unwrap();\n\n        // \u786e\u4fdd\u65b0\u521b\u5efa\u7684\u6587\u4ef6\u53ea\u6709\u4e00\u4e2a\u786c\u94fe\u63a5\n        assert_eq!(count_hard_links(\"temp_file\"), 0);\n\n        // \u521b\u5efa\u786c\u94fe\u63a5\n        fs::hard_link(\"temp_file\", \"temp_file_link\").unwrap();  // \u8fd9\u91cc\u4f7f\u7528hard_link\n\n        // \u68c0\u67e5\u786c\u94fe\u63a5\u662f\u5426\u771f\u7684\u88ab\u521b\u5efa\n        assert!(fs::metadata(\"temp_file_link\").is_ok());\n        assert_eq!(fs::metadata(\"temp_file_link\").unwrap().nlink() as i32, 2);\n\n        // \u68c0\u67e5\u786c\u94fe\u63a5\u6570\u91cf\n        assert_eq!(count_hard_links(\"temp_file\"), 1);\n\n        // \u6e05\u7406\n        fs::remove_file(\"temp_file_link\").unwrap();\n        fs::remove_file(\"temp_file\").unwrap();\n    }\n}\n"}