{"type": "source_file", "children": [{"type": "use_declaration", "children": [{"type": "use", "children": [], "start_byte": 0, "end_byte": 3, "start_point": [0, 0], "end_point": [0, 3], "text": "use"}, {"type": "scoped_identifier", "children": [{"type": "identifier", "children": [], "start_byte": 4, "end_byte": 7, "start_point": [0, 4], "end_point": [0, 7], "text": "std"}, {"type": "::", "children": [], "start_byte": 7, "end_byte": 9, "start_point": [0, 7], "end_point": [0, 9], "text": "::"}, {"type": "identifier", "children": [], "start_byte": 9, "end_byte": 11, "start_point": [0, 9], "end_point": [0, 11], "text": "fs"}], "start_byte": 4, "end_byte": 11, "start_point": [0, 4], "end_point": [0, 11], "text": "std::fs"}, {"type": ";", "children": [], "start_byte": 11, "end_byte": 12, "start_point": [0, 11], "end_point": [0, 12], "text": ";"}], "start_byte": 0, "end_byte": 12, "start_point": [0, 0], "end_point": [0, 12], "text": "use std::fs;"}, {"type": "use_declaration", "children": [{"type": "use", "children": [], "start_byte": 13, "end_byte": 16, "start_point": [1, 0], "end_point": [1, 3], "text": "use"}, {"type": "scoped_use_list", "children": [{"type": "scoped_identifier", "children": [{"type": "identifier", "children": [], "start_byte": 17, "end_byte": 20, "start_point": [1, 4], "end_point": [1, 7], "text": "std"}, {"type": "::", "children": [], "start_byte": 20, "end_byte": 22, "start_point": [1, 7], "end_point": [1, 9], "text": "::"}, {"type": "identifier", "children": [], "start_byte": 22, "end_byte": 24, "start_point": [1, 9], "end_point": [1, 11], "text": "io"}], "start_byte": 17, "end_byte": 24, "start_point": [1, 4], "end_point": [1, 11], "text": "std::io"}, {"type": "::", "children": [], "start_byte": 24, "end_byte": 26, "start_point": [1, 11], "end_point": [1, 13], "text": "::"}, {"type": "use_list", "children": [{"type": "{", "children": [], "start_byte": 26, "end_byte": 27, "start_point": [1, 13], "end_point": [1, 14], "text": "{"}, {"type": "self", "children": [], "start_byte": 27, "end_byte": 31, "start_point": [1, 14], "end_point": [1, 18], "text": "self"}, {"type": ",", "children": [], "start_byte": 31, "end_byte": 32, "start_point": [1, 18], "end_point": [1, 19], "text": ","}, {"type": "identifier", "children": [], "start_byte": 33, "end_byte": 38, "start_point": [1, 20], "end_point": [1, 25], "text": "Write"}, {"type": "}", "children": [], "start_byte": 38, "end_byte": 39, "start_point": [1, 25], "end_point": [1, 26], "text": "}"}], "start_byte": 26, "end_byte": 39, "start_point": [1, 13], "end_point": [1, 26], "text": "{self, Write}"}], "start_byte": 17, "end_byte": 39, "start_point": [1, 4], "end_point": [1, 26], "text": "std::io::{self, Write}"}, {"type": ";", "children": [], "start_byte": 39, "end_byte": 40, "start_point": [1, 26], "end_point": [1, 27], "text": ";"}], "start_byte": 13, "end_byte": 40, "start_point": [1, 0], "end_point": [1, 27], "text": "use std::io::{self, Write};"}, {"type": "use_declaration", "children": [{"type": "use", "children": [], "start_byte": 41, "end_byte": 44, "start_point": [2, 0], "end_point": [2, 3], "text": "use"}, {"type": "scoped_identifier", "children": [{"type": "scoped_identifier", "children": [{"type": "scoped_identifier", "children": [{"type": "scoped_identifier", "children": [{"type": "identifier", "children": [], "start_byte": 45, "end_byte": 48, "start_point": [2, 4], "end_point": [2, 7], "text": "std"}, {"type": "::", "children": [], "start_byte": 48, "end_byte": 50, "start_point": [2, 7], "end_point": [2, 9], "text": "::"}, {"type": "identifier", "children": [], "start_byte": 50, "end_byte": 52, "start_point": [2, 9], "end_point": [2, 11], "text": "os"}], "start_byte": 45, "end_byte": 52, "start_point": [2, 4], "end_point": [2, 11], "text": "std::os"}, {"type": "::", "children": [], "start_byte": 52, "end_byte": 54, "start_point": [2, 11], "end_point": [2, 13], "text": "::"}, {"type": "identifier", "children": [], "start_byte": 54, "end_byte": 58, "start_point": [2, 13], "end_point": [2, 17], "text": "unix"}], "start_byte": 45, "end_byte": 58, "start_point": [2, 4], "end_point": [2, 17], "text": "std::os::unix"}, {"type": "::", "children": [], "start_byte": 58, "end_byte": 60, "start_point": [2, 17], "end_point": [2, 19], "text": "::"}, {"type": "identifier", "children": [], "start_byte": 60, "end_byte": 62, "start_point": [2, 19], "end_point": [2, 21], "text": "fs"}], "start_byte": 45, "end_byte": 62, "start_point": [2, 4], "end_point": [2, 21], "text": "std::os::unix::fs"}, {"type": "::", "children": [], "start_byte": 62, "end_byte": 64, "start_point": [2, 21], "end_point": [2, 23], "text": "::"}, {"type": "identifier", "children": [], "start_byte": 64, "end_byte": 75, "start_point": [2, 23], "end_point": [2, 34], "text": "MetadataExt"}], "start_byte": 45, "end_byte": 75, "start_point": [2, 4], "end_point": [2, 34], "text": "std::os::unix::fs::MetadataExt"}, {"type": ";", "children": [], "start_byte": 75, "end_byte": 76, "start_point": [2, 34], "end_point": [2, 35], "text": ";"}], "start_byte": 41, "end_byte": 76, "start_point": [2, 0], "end_point": [2, 35], "text": "use std::os::unix::fs::MetadataExt;"}, {"type": "use_declaration", "children": [{"type": "use", "children": [], "start_byte": 77, "end_byte": 80, "start_point": [3, 0], "end_point": [3, 3], "text": "use"}, {"type": "use_wildcard", "children": [{"type": "scoped_identifier", "children": [{"type": "scoped_identifier", "children": [{"type": "crate", "children": [], "start_byte": 81, "end_byte": 86, "start_point": [3, 4], "end_point": [3, 9], "text": "crate"}, {"type": "::", "children": [], "start_byte": 86, "end_byte": 88, "start_point": [3, 9], "end_point": [3, 11], "text": "::"}, {"type": "identifier", "children": [], "start_byte": 88, "end_byte": 93, "start_point": [3, 11], "end_point": [3, 16], "text": "bzip2"}], "start_byte": 81, "end_byte": 93, "start_point": [3, 4], "end_point": [3, 16], "text": "crate::bzip2"}, {"type": "::", "children": [], "start_byte": 93, "end_byte": 95, "start_point": [3, 16], "end_point": [3, 18], "text": "::"}, {"type": "identifier", "children": [], "start_byte": 95, "end_byte": 117, "start_point": [3, 18], "end_point": [3, 40], "text": "scc_90_root_52_setExit"}], "start_byte": 81, "end_byte": 117, "start_point": [3, 4], "end_point": [3, 40], "text": "crate::bzip2::scc_90_root_52_setExit"}, {"type": "::", "children": [], "start_byte": 117, "end_byte": 119, "start_point": [3, 40], "end_point": [3, 42], "text": "::"}, {"type": "*", "children": [], "start_byte": 119, "end_byte": 120, "start_point": [3, 42], "end_point": [3, 43], "text": "*"}], "start_byte": 81, "end_byte": 120, "start_point": [3, 4], "end_point": [3, 43], "text": "crate::bzip2::scc_90_root_52_setExit::*"}, {"type": ";", "children": [], "start_byte": 120, "end_byte": 121, "start_point": [3, 43], "end_point": [3, 44], "text": ";"}], "start_byte": 77, "end_byte": 121, "start_point": [3, 0], "end_point": [3, 44], "text": "use crate::bzip2::scc_90_root_52_setExit::*;"}, {"type": "use_declaration", "children": [{"type": "use", "children": [], "start_byte": 122, "end_byte": 125, "start_point": [4, 0], "end_point": [4, 3], "text": "use"}, {"type": "use_wildcard", "children": [{"type": "scoped_identifier", "children": [{"type": "scoped_identifier", "children": [{"type": "crate", "children": [], "start_byte": 126, "end_byte": 131, "start_point": [4, 4], "end_point": [4, 9], "text": "crate"}, {"type": "::", "children": [], "start_byte": 131, "end_byte": 133, "start_point": [4, 9], "end_point": [4, 11], "text": "::"}, {"type": "identifier", "children": [], "start_byte": 133, "end_byte": 144, "start_point": [4, 11], "end_point": [4, 22], "text": "global_vars"}], "start_byte": 126, "end_byte": 144, "start_point": [4, 4], "end_point": [4, 22], "text": "crate::global_vars"}, {"type": "::", "children": [], "start_byte": 144, "end_byte": 146, "start_point": [4, 22], "end_point": [4, 24], "text": "::"}, {"type": "identifier", "children": [], "start_byte": 146, "end_byte": 154, "start_point": [4, 24], "end_point": [4, 32], "text": "bzip2_c5"}], "start_byte": 126, "end_byte": 154, "start_point": [4, 4], "end_point": [4, 32], "text": "crate::global_vars::bzip2_c5"}, {"type": "::", "children": [], "start_byte": 154, "end_byte": 156, "start_point": [4, 32], "end_point": [4, 34], "text": "::"}, {"type": "*", "children": [], "start_byte": 156, "end_byte": 157, "start_point": [4, 34], "end_point": [4, 35], "text": "*"}], "start_byte": 126, "end_byte": 157, "start_point": [4, 4], "end_point": [4, 35], "text": "crate::global_vars::bzip2_c5::*"}, {"type": ";", "children": [], "start_byte": 157, "end_byte": 158, "start_point": [4, 35], "end_point": [4, 36], "text": ";"}], "start_byte": 122, "end_byte": 158, "start_point": [4, 0], "end_point": [4, 36], "text": "use crate::global_vars::bzip2_c5::*;"}, {"type": "use_declaration", "children": [{"type": "use", "children": [], "start_byte": 159, "end_byte": 162, "start_point": [5, 0], "end_point": [5, 3], "text": "use"}, {"type": "use_wildcard", "children": [{"type": "scoped_identifier", "children": [{"type": "scoped_identifier", "children": [{"type": "crate", "children": [], "start_byte": 163, "end_byte": 168, "start_point": [5, 4], "end_point": [5, 9], "text": "crate"}, {"type": "::", "children": [], "start_byte": 168, "end_byte": 170, "start_point": [5, 9], "end_point": [5, 11], "text": "::"}, {"type": "identifier", "children": [], "start_byte": 170, "end_byte": 181, "start_point": [5, 11], "end_point": [5, 22], "text": "global_vars"}], "start_byte": 163, "end_byte": 181, "start_point": [5, 4], "end_point": [5, 22], "text": "crate::global_vars"}, {"type": "::", "children": [], "start_byte": 181, "end_byte": 183, "start_point": [5, 22], "end_point": [5, 24], "text": "::"}, {"type": "identifier", "children": [], "start_byte": 183, "end_byte": 191, "start_point": [5, 24], "end_point": [5, 32], "text": "bzip2_c1"}], "start_byte": 163, "end_byte": 191, "start_point": [5, 4], "end_point": [5, 32], "text": "crate::global_vars::bzip2_c1"}, {"type": "::", "children": [], "start_byte": 191, "end_byte": 193, "start_point": [5, 32], "end_point": [5, 34], "text": "::"}, {"type": "*", "children": [], "start_byte": 193, "end_byte": 194, "start_point": [5, 34], "end_point": [5, 35], "text": "*"}], "start_byte": 163, "end_byte": 194, "start_point": [5, 4], "end_point": [5, 35], "text": "crate::global_vars::bzip2_c1::*"}, {"type": ";", "children": [], "start_byte": 194, "end_byte": 195, "start_point": [5, 35], "end_point": [5, 36], "text": ";"}], "start_byte": 159, "end_byte": 195, "start_point": [5, 0], "end_point": [5, 36], "text": "use crate::global_vars::bzip2_c1::*;"}, {"type": "use_declaration", "children": [{"type": "use", "children": [], "start_byte": 196, "end_byte": 199, "start_point": [6, 0], "end_point": [6, 3], "text": "use"}, {"type": "use_wildcard", "children": [{"type": "scoped_identifier", "children": [{"type": "scoped_identifier", "children": [{"type": "crate", "children": [], "start_byte": 200, "end_byte": 205, "start_point": [6, 4], "end_point": [6, 9], "text": "crate"}, {"type": "::", "children": [], "start_byte": 205, "end_byte": 207, "start_point": [6, 9], "end_point": [6, 11], "text": "::"}, {"type": "identifier", "children": [], "start_byte": 207, "end_byte": 218, "start_point": [6, 11], "end_point": [6, 22], "text": "global_vars"}], "start_byte": 200, "end_byte": 218, "start_point": [6, 4], "end_point": [6, 22], "text": "crate::global_vars"}, {"type": "::", "children": [], "start_byte": 218, "end_byte": 220, "start_point": [6, 22], "end_point": [6, 24], "text": "::"}, {"type": "identifier", "children": [], "start_byte": 220, "end_byte": 228, "start_point": [6, 24], "end_point": [6, 32], "text": "bzip2_c2"}], "start_byte": 200, "end_byte": 228, "start_point": [6, 4], "end_point": [6, 32], "text": "crate::global_vars::bzip2_c2"}, {"type": "::", "children": [], "start_byte": 228, "end_byte": 230, "start_point": [6, 32], "end_point": [6, 34], "text": "::"}, {"type": "*", "children": [], "start_byte": 230, "end_byte": 231, "start_point": [6, 34], "end_point": [6, 35], "text": "*"}], "start_byte": 200, "end_byte": 231, "start_point": [6, 4], "end_point": [6, 35], "text": "crate::global_vars::bzip2_c2::*"}, {"type": ";", "children": [], "start_byte": 231, "end_byte": 232, "start_point": [6, 35], "end_point": [6, 36], "text": ";"}], "start_byte": 196, "end_byte": 232, "start_point": [6, 0], "end_point": [6, 36], "text": "use crate::global_vars::bzip2_c2::*;"}, {"type": "function_item", "children": [{"type": "visibility_modifier", "children": [{"type": "pub", "children": [], "start_byte": 235, "end_byte": 238, "start_point": [9, 0], "end_point": [9, 3], "text": "pub"}], "start_byte": 235, "end_byte": 238, "start_point": [9, 0], "end_point": [9, 3], "text": "pub"}, {"type": "fn", "children": [], "start_byte": 239, "end_byte": 241, "start_point": [9, 4], "end_point": [9, 6], "text": "fn"}, {"type": "identifier", "children": [], "start_byte": 242, "end_byte": 259, "start_point": [9, 7], "end_point": [9, 24], "text": "clean_up_and_fail"}, {"type": "parameters", "children": [{"type": "(", "children": [], "start_byte": 259, "end_byte": 260, "start_point": [9, 24], "end_point": [9, 25], "text": "("}, {"type": "parameter", "children": [{"type": "identifier", "children": [], "start_byte": 260, "end_byte": 262, "start_point": [9, 25], "end_point": [9, 27], "text": "ec"}, {"type": ":", "children": [], "start_byte": 262, "end_byte": 263, "start_point": [9, 27], "end_point": [9, 28], "text": ":"}, {"type": "primitive_type", "children": [], "start_byte": 264, "end_byte": 267, "start_point": [9, 29], "end_point": [9, 32], "text": "i32"}], "start_byte": 260, "end_byte": 267, "start_point": [9, 25], "end_point": [9, 32], "text": "ec: i32"}, {"type": ")", "children": [], "start_byte": 267, "end_byte": 268, "start_point": [9, 32], "end_point": [9, 33], "text": ")"}], "start_byte": 259, "end_byte": 268, "start_point": [9, 24], "end_point": [9, 33], "text": "(ec: i32)"}, {"type": "block", "children": [{"type": "{", "children": [], "start_byte": 269, "end_byte": 270, "start_point": [9, 34], "end_point": [9, 35], "text": "{"}, {"type": "line_comment", "children": [], "start_byte": 275, "end_byte": 286, "start_point": [10, 4], "end_point": [10, 15], "text": "// unsafe {"}, {"type": "line_comment", "children": [], "start_byte": 291, "end_byte": 319, "start_point": [11, 4], "end_point": [11, 32], "text": "//     // \u8bbf\u95ee\u5168\u5c40\u53d8\u91cf\n    //     "}, {"type": "line_comment", "children": [], "start_byte": 324, "end_byte": 408, "start_point": [12, 4], "end_point": [12, 88], "text": "et_val = fs::metadata(String::from_utf8_lossy(&IN_NAME)).is_ok() as i32;\n\n    //    "}, {"type": "line_comment", "children": [], "start_byte": 414, "end_byte": 485, "start_point": [14, 4], "end_point": [14, 75], "text": "C_MODE == 3 && OP_MODE != 3 && DELETE_OUTPUT_ON_INTERRUPT {\n    //     "}, {"type": "line_comment", "children": [], "start_byte": 490, "end_byte": 518, "start_point": [15, 4], "end_point": [15, 32], "text": "f ret_val == 0 {\n    //     "}, {"type": "line_comment", "children": [], "start_byte": 523, "end_byte": 557, "start_point": [16, 4], "end_point": [16, 38], "text": "   if VERBOSITY != 0 {\n    //     "}, {"type": "line_comment", "children": [], "start_byte": 562, "end_byte": 637, "start_point": [17, 4], "end_point": [17, 79], "text": "       eprintln!(\"{}: Deleting output file {}, if it exists.\", \n    //     "}, {"type": "line_comment", "children": [], "start_byte": 642, "end_byte": 738, "start_point": [18, 4], "end_point": [18, 100], "text": "           String::from_utf8_lossy(&PROG_NAME), String::from_utf8_lossy(&OUT_NAME));\n    //     "}, {"type": "line_comment", "children": [], "start_byte": 743, "end_byte": 759, "start_point": [19, 4], "end_point": [19, 20], "text": "   }\n\n    //    "}, {"type": "line_comment", "children": [], "start_byte": 765, "end_byte": 843, "start_point": [21, 4], "end_point": [21, 82], "text": "   // \u5047\u8bbe outputHandleJustInCase \u662f\u5168\u5c40\u7684 File \u7c7b\u578b\u53d8\u91cf\n    //             if let Ok(_)"}, {"type": "line_comment", "children": [], "start_byte": 848, "end_byte": 931, "start_point": [22, 4], "end_point": [22, 87], "text": "::remove_file(String::from_utf8_lossy(&OUT_NAME)) {\n    //                 // \u6210\u529f\u5220\u9664\n"}, {"type": "line_comment", "children": [], "start_byte": 936, "end_byte": 970, "start_point": [23, 4], "end_point": [23, 38], "text": "/             } else {\n    //     "}, {"type": "line_comment", "children": [], "start_byte": 975, "end_byte": 998, "start_point": [24, 4], "end_point": [24, 27], "text": "       eprintln!(\"{}: W"}, {"type": "line_comment", "children": [], "start_byte": 1003, "end_byte": 1093, "start_point": [25, 4], "end_point": [25, 94], "text": "G: deletion of output file (apparently) failed.\", \n    //                     String::from"}, {"type": "line_comment", "children": [], "start_byte": 1098, "end_byte": 1158, "start_point": [26, 4], "end_point": [26, 64], "text": "_lossy(&PROG_NAME));\n    //             }\n    //         } e"}, {"type": "line_comment", "children": [], "start_byte": 1163, "end_byte": 1179, "start_point": [27, 4], "end_point": [27, 20], "text": "\n    //         "}, {"type": "line_comment", "children": [], "start_byte": 1184, "end_byte": 1203, "start_point": [28, 4], "end_point": [28, 23], "text": "println!(\"{}: WARNI"}, {"type": "line_comment", "children": [], "start_byte": 1208, "end_byte": 1321, "start_point": [29, 4], "end_point": [29, 117], "text": "eletion of output file suppressed\", String::from_utf8_lossy(&PROG_NAME));\n    //             eprintln!(\"{}:    si"}, {"type": "line_comment", "children": [], "start_byte": 1326, "end_byte": 1446, "start_point": [30, 4], "end_point": [30, 124], "text": "nput file no longer exists.  Output file\", String::from_utf8_lossy(&PROG_NAME));\n    //             eprintln!(\"{}:    `{"}, {"type": "line_comment", "children": [], "start_byte": 1451, "end_byte": 1583, "start_point": [31, 4], "end_point": [31, 136], "text": "y be incomplete.\", String::from_utf8_lossy(&PROG_NAME), String::from_utf8_lossy(&OUT_NAME));\n    //             eprintln!(\"{}:    I "}, {"type": "line_comment", "children": [], "start_byte": 1588, "end_byte": 1713, "start_point": [32, 4], "end_point": [32, 129], "text": "st doing an integrity test (bzip2 -tv) of it.\", String::from_utf8_lossy(&PROG_NAME));\n    //         }\n    //     }\n\n    //  "}, {"type": "line_comment", "children": [], "start_byte": 1718, "end_byte": 1730, "start_point": [33, 4], "end_point": [33, 16], "text": " VERBOSITY !"}, {"type": "line_comment", "children": [], "start_byte": 1735, "end_byte": 1743, "start_point": [34, 4], "end_point": [34, 12], "text": "& NUM_FI"}, {"type": "line_comment", "children": [], "start_byte": 1749, "end_byte": 1837, "start_point": [36, 4], "end_point": [36, 92], "text": "ES > 0 && NUM_FILES_PROCESSED < NUM_FILE_NAMES {\n    //         eprintln!(\"{}: WARNING: "}, {"type": "line_comment", "children": [], "start_byte": 1842, "end_byte": 1952, "start_point": [37, 4], "end_point": [37, 114], "text": "files have not been processed:\", String::from_utf8_lossy(&PROG_NAME));\n    //         eprintln!(\"{}:    {} spe"}, {"type": "line_comment", "children": [], "start_byte": 1957, "end_byte": 2042, "start_point": [38, 4], "end_point": [38, 89], "text": "d on command line, {} not processed yet.\\n\", \n    //             String::from_utf8_lo"}, {"type": "line_comment", "children": [], "start_byte": 2047, "end_byte": 2153, "start_point": [39, 4], "end_point": [39, 110], "text": "PROG_NAME), NUM_FILE_NAMES, NUM_FILE_NAMES - NUM_FILES_PROCESSED);\n    //     }\n\n    //     set_exit(EXIT_"}, {"type": "line_comment", "children": [], "start_byte": 2158, "end_byte": 2166, "start_point": [40, 4], "end_point": [40, 12], "text": ");\n    /"}, {"type": "line_comment", "children": [], "start_byte": 2172, "end_byte": 2200, "start_point": [42, 4], "end_point": [42, 32], "text": "std::process::exit(EXIT_VALU"}, {"type": "line_comment", "children": [], "start_byte": 2205, "end_byte": 2243, "start_point": [43, 4], "end_point": [43, 42], "text": "   // }\n}\n#[cfg(test)]\nmod tests {\n   "}, {"type": "line_comment", "children": [], "start_byte": 2248, "end_byte": 2252, "start_point": [44, 4], "end_point": [44, 8], "text": "supe"}, {"type": "}", "children": [], "start_byte": 2253, "end_byte": 2254, "start_point": [45, 0], "end_point": [45, 1], "text": ":"}], "start_byte": 269, "end_byte": 2254, "start_point": [9, 34], "end_point": [45, 1], "text": "{\n    // unsafe {\n    //     // \u8bbf\u95ee\u5168\u5c40\u53d8\u91cf\n    //     let ret_val = fs::metadata(String::from_utf8_lossy(&IN_NAME)).is_ok() as i32;\n\n    //     if SRC_MODE == 3 && OP_MODE != 3 && DELETE_OUTPUT_ON_INTERRUPT {\n    //         if ret_val == 0 {\n    //             if VERBOSITY != 0 {\n    //                 eprintln!(\"{}: Deleting output file {}, if it exists.\", \n    //                     String::from_utf8_lossy(&PROG_NAME), String::from_utf8_lossy(&OUT_NAME));\n    //             }\n\n    //             // \u5047\u8bbe outputHandleJustInCase \u662f\u5168\u5c40\u7684 File \u7c7b\u578b\u53d8\u91cf\n    //             if let Ok(_) = fs::remove_file(String::from_utf8_lossy(&OUT_NAME)) {\n    //                 // \u6210\u529f\u5220\u9664\n    //             } else {\n    //                 eprintln!(\"{}: WARNING: deletion of output file (apparently) failed.\", \n    //                     String::from_utf8_lossy(&PROG_NAME));\n    //             }\n    //         } else {\n    //             eprintln!(\"{}: WARNING: deletion of output file suppressed\", String::from_utf8_lossy(&PROG_NAME));\n    //             eprintln!(\"{}:    since input file no longer exists.  Output file\", String::from_utf8_lossy(&PROG_NAME));\n    //             eprintln!(\"{}:    `{}` may be incomplete.\", String::from_utf8_lossy(&PROG_NAME), String::from_utf8_lossy(&OUT_NAME));\n    //             eprintln!(\"{}:    I suggest doing an integrity test (bzip2 -tv) of it.\", String::from_utf8_lossy(&PROG_NAME));\n    //         }\n    //     }\n\n    //     if VERBOSITY != 0 && NUM_FILE_NAMES > 0 && NUM_FILES_PROCESSED < NUM_FILE_NAMES {\n    //         eprintln!(\"{}: WARNING: some files have not been processed:\", String::from_utf8_lossy(&PROG_NAME));\n    //         eprintln!(\"{}:    {} specified on command line, {} not processed yet.\\n\", \n    //             String::from_utf8_lossy(&PROG_NAME), NUM_FILE_NAMES, NUM_FILE_NAMES - NUM_FILES_PROCESSED);\n    //     }\n\n    //     set_exit(EXIT_VALUE);\n    //     std::process::exit(EXIT_VALUE);\n    // }\n}\n#[cfg(test)]\nmod tests {\n    use super:"}], "start_byte": 235, "end_byte": 2254, "start_point": [9, 0], "end_point": [45, 1], "text": "pub fn clean_up_and_fail(ec: i32) {\n    // unsafe {\n    //     // \u8bbf\u95ee\u5168\u5c40\u53d8\u91cf\n    //     let ret_val = fs::metadata(String::from_utf8_lossy(&IN_NAME)).is_ok() as i32;\n\n    //     if SRC_MODE == 3 && OP_MODE != 3 && DELETE_OUTPUT_ON_INTERRUPT {\n    //         if ret_val == 0 {\n    //             if VERBOSITY != 0 {\n    //                 eprintln!(\"{}: Deleting output file {}, if it exists.\", \n    //                     String::from_utf8_lossy(&PROG_NAME), String::from_utf8_lossy(&OUT_NAME));\n    //             }\n\n    //             // \u5047\u8bbe outputHandleJustInCase \u662f\u5168\u5c40\u7684 File \u7c7b\u578b\u53d8\u91cf\n    //             if let Ok(_) = fs::remove_file(String::from_utf8_lossy(&OUT_NAME)) {\n    //                 // \u6210\u529f\u5220\u9664\n    //             } else {\n    //                 eprintln!(\"{}: WARNING: deletion of output file (apparently) failed.\", \n    //                     String::from_utf8_lossy(&PROG_NAME));\n    //             }\n    //         } else {\n    //             eprintln!(\"{}: WARNING: deletion of output file suppressed\", String::from_utf8_lossy(&PROG_NAME));\n    //             eprintln!(\"{}:    since input file no longer exists.  Output file\", String::from_utf8_lossy(&PROG_NAME));\n    //             eprintln!(\"{}:    `{}` may be incomplete.\", String::from_utf8_lossy(&PROG_NAME), String::from_utf8_lossy(&OUT_NAME));\n    //             eprintln!(\"{}:    I suggest doing an integrity test (bzip2 -tv) of it.\", String::from_utf8_lossy(&PROG_NAME));\n    //         }\n    //     }\n\n    //     if VERBOSITY != 0 && NUM_FILE_NAMES > 0 && NUM_FILES_PROCESSED < NUM_FILE_NAMES {\n    //         eprintln!(\"{}: WARNING: some files have not been processed:\", String::from_utf8_lossy(&PROG_NAME));\n    //         eprintln!(\"{}:    {} specified on command line, {} not processed yet.\\n\", \n    //             String::from_utf8_lossy(&PROG_NAME), NUM_FILE_NAMES, NUM_FILE_NAMES - NUM_FILES_PROCESSED);\n    //     }\n\n    //     set_exit(EXIT_VALUE);\n    //     std::process::exit(EXIT_VALUE);\n    // }\n}\n#[cfg(test)]\nmod tests {\n    use super:"}, {"type": "attribute_item", "children": [{"type": "#", "children": [], "start_byte": 2255, "end_byte": 2256, "start_point": [46, 0], "end_point": [46, 1], "text": "*"}, {"type": "[", "children": [], "start_byte": 2256, "end_byte": 2257, "start_point": [46, 1], "end_point": [46, 2], "text": ";"}, {"type": "attribute", "children": [{"type": "identifier", "children": [], "start_byte": 2257, "end_byte": 2260, "start_point": [46, 2], "end_point": [46, 5], "text": "\n\n "}, {"type": "token_tree", "children": [{"type": "(", "children": [], "start_byte": 2260, "end_byte": 2261, "start_point": [46, 5], "end_point": [46, 6], "text": " "}, {"type": "identifier", "children": [], "start_byte": 2261, "end_byte": 2265, "start_point": [46, 6], "end_point": [46, 10], "text": "  #["}, {"type": ")", "children": [], "start_byte": 2265, "end_byte": 2266, "start_point": [46, 10], "end_point": [46, 11], "text": "t"}], "start_byte": 2260, "end_byte": 2266, "start_point": [46, 5], "end_point": [46, 11], "text": "   #[t"}], "start_byte": 2257, "end_byte": 2266, "start_point": [46, 2], "end_point": [46, 11], "text": "\n\n    #[t"}, {"type": "]", "children": [], "start_byte": 2266, "end_byte": 2267, "start_point": [46, 11], "end_point": [46, 12], "text": "e"}], "start_byte": 2255, "end_byte": 2267, "start_point": [46, 0], "end_point": [46, 12], "text": "*;\n\n    #[te"}, {"type": "mod_item", "children": [{"type": "mod", "children": [], "start_byte": 2268, "end_byte": 2271, "start_point": [47, 0], "end_point": [47, 3], "text": "t]\n"}, {"type": "identifier", "children": [], "start_byte": 2272, "end_byte": 2277, "start_point": [47, 4], "end_point": [47, 9], "text": "   fn"}, {"type": "declaration_list", "children": [{"type": "{", "children": [], "start_byte": 2278, "end_byte": 2279, "start_point": [47, 10], "end_point": [47, 11], "text": "t"}, {"type": "use_declaration", "children": [{"type": "use", "children": [], "start_byte": 2284, "end_byte": 2287, "start_point": [48, 4], "end_point": [48, 7], "text": "ele"}, {"type": "use_wildcard", "children": [{"type": "super", "children": [], "start_byte": 2288, "end_byte": 2293, "start_point": [48, 8], "end_point": [48, 13], "text": "e_out"}, {"type": "::", "children": [], "start_byte": 2293, "end_byte": 2295, "start_point": [48, 13], "end_point": [48, 15], "text": "pu"}, {"type": "*", "children": [], "start_byte": 2295, "end_byte": 2296, "start_point": [48, 15], "end_point": [48, 16], "text": "t"}], "start_byte": 2288, "end_byte": 2296, "start_point": [48, 8], "end_point": [48, 16], "text": "e_output"}, {"type": ";", "children": [], "start_byte": 2296, "end_byte": 2297, "start_point": [48, 16], "end_point": [48, 17], "text": "_"}], "start_byte": 2284, "end_byte": 2297, "start_point": [48, 4], "end_point": [48, 17], "text": "elete_output_"}, {"type": "attribute_item", "children": [{"type": "#", "children": [], "start_byte": 2303, "end_byte": 2304, "start_point": [50, 4], "end_point": [50, 5], "text": "e"}, {"type": "[", "children": [], "start_byte": 2304, "end_byte": 2305, "start_point": [50, 5], "end_point": [50, 6], "text": "r"}, {"type": "attribute", "children": [{"type": "identifier", "children": [], "start_byte": 2305, "end_byte": 2309, "start_point": [50, 6], "end_point": [50, 10], "text": "rupt"}], "start_byte": 2305, "end_byte": 2309, "start_point": [50, 6], "end_point": [50, 10], "text": "rupt"}, {"type": "]", "children": [], "start_byte": 2309, "end_byte": 2310, "start_point": [50, 10], "end_point": [50, 11], "text": "("}], "start_byte": 2303, "end_byte": 2310, "start_point": [50, 4], "end_point": [50, 11], "text": "errupt("}, {"type": "function_item", "children": [{"type": "fn", "children": [], "start_byte": 2315, "end_byte": 2317, "start_point": [51, 4], "end_point": [51, 6], "text": "  "}, {"type": "identifier", "children": [], "start_byte": 2318, "end_byte": 2349, "start_point": [51, 7], "end_point": [51, 38], "text": "    let input_filename = \"test_"}, {"type": "parameters", "children": [{"type": "(", "children": [], "start_byte": 2349, "end_byte": 2350, "start_point": [51, 38], "end_point": [51, 39], "text": "i"}, {"type": ")", "children": [], "start_byte": 2350, "end_byte": 2351, "start_point": [51, 39], "end_point": [51, 40], "text": "n"}], "start_byte": 2349, "end_byte": 2351, "start_point": [51, 38], "end_point": [51, 40], "text": "in"}, {"type": "block", "children": [{"type": "{", "children": [], "start_byte": 2352, "end_byte": 2353, "start_point": [51, 41], "end_point": [51, 42], "text": "u"}, {"type": "let_declaration", "children": [{"type": "let", "children": [], "start_byte": 2362, "end_byte": 2365, "start_point": [52, 8], "end_point": [52, 11], "text": "   "}, {"type": "identifier", "children": [], "start_byte": 2366, "end_byte": 2380, "start_point": [52, 12], "end_point": [52, 26], "text": "   let output_"}, {"type": "=", "children": [], "start_byte": 2381, "end_byte": 2382, "start_point": [52, 27], "end_point": [52, 28], "text": "i"}, {"type": "string_literal", "children": [{"type": "\"", "children": [], "start_byte": 2383, "end_byte": 2384, "start_point": [52, 29], "end_point": [52, 30], "text": "e"}, {"type": "\"", "children": [], "start_byte": 2398, "end_byte": 2399, "start_point": [52, 44], "end_point": [52, 45], "text": "u"}], "start_byte": 2383, "end_byte": 2399, "start_point": [52, 29], "end_point": [52, 45], "text": "ename = \"test_ou"}, {"type": ";", "children": [], "start_byte": 2399, "end_byte": 2400, "start_point": [52, 45], "end_point": [52, 46], "text": "t"}], "start_byte": 2362, "end_byte": 2400, "start_point": [52, 8], "end_point": [52, 46], "text": "       let output_filename = \"test_out"}, {"type": "let_declaration", "children": [{"type": "let", "children": [], "start_byte": 2409, "end_byte": 2412, "start_point": [53, 8], "end_point": [53, 11], "text": "\n\n "}, {"type": "identifier", "children": [], "start_byte": 2413, "end_byte": 2428, "start_point": [53, 12], "end_point": [53, 27], "text": "      // \u521b\u5efa\u4e00\u4e2a\u5047\u7684"}, {"type": "=", "children": [], "start_byte": 2429, "end_byte": 2430, "start_point": [53, 28], "end_point": [53, 29], "text": "\u5165"}, {"type": "string_literal", "children": [{"type": "\"", "children": [], "start_byte": 2431, "end_byte": 2432, "start_point": [53, 30], "end_point": [53, 31], "text": "\u4ef6"}, {"type": "\"", "children": [], "start_byte": 2447, "end_byte": 2448, "start_point": [53, 46], "end_point": [53, 47], "text": "t"}], "start_byte": 2431, "end_byte": 2448, "start_point": [53, 30], "end_point": [53, 47], "text": "\u4ef6\u548c\u8f93\u51fa\u6587\u4ef6\n        st"}, {"type": ";", "children": [], "start_byte": 2448, "end_byte": 2449, "start_point": [53, 47], "end_point": [53, 48], "text": "d"}], "start_byte": 2409, "end_byte": 2449, "start_point": [53, 8], "end_point": [53, 48], "text": "\n\n        // \u521b\u5efa\u4e00\u4e2a\u5047\u7684\u8f93\u5165\u6587\u4ef6\u548c\u8f93\u51fa\u6587\u4ef6\n        std"}, {"type": "line_comment", "children": [], "start_byte": 2459, "end_byte": 2507, "start_point": [55, 8], "end_point": [55, 56], "text": "::create(input_filename).unwrap();\n        std::"}, {"type": "expression_statement", "children": [{"type": "call_expression", "children": [{"type": "field_expression", "children": [{"type": "call_expression", "children": [{"type": "scoped_identifier", "children": [{"type": "scoped_identifier", "children": [{"type": "scoped_identifier", "children": [{"type": "identifier", "children": [], "start_byte": 2516, "end_byte": 2519, "start_point": [56, 8], "end_point": [56, 11], "text": ":cr"}, {"type": "::", "children": [], "start_byte": 2519, "end_byte": 2521, "start_point": [56, 11], "end_point": [56, 13], "text": "ea"}, {"type": "identifier", "children": [], "start_byte": 2521, "end_byte": 2523, "start_point": [56, 13], "end_point": [56, 15], "text": "te"}], "start_byte": 2516, "end_byte": 2523, "start_point": [56, 8], "end_point": [56, 15], "text": ":create"}, {"type": "::", "children": [], "start_byte": 2523, "end_byte": 2525, "start_point": [56, 15], "end_point": [56, 17], "text": "(o"}, {"type": "identifier", "children": [], "start_byte": 2525, "end_byte": 2529, "start_point": [56, 17], "end_point": [56, 21], "text": "utpu"}], "start_byte": 2516, "end_byte": 2529, "start_point": [56, 8], "end_point": [56, 21], "text": ":create(outpu"}, {"type": "::", "children": [], "start_byte": 2529, "end_byte": 2531, "start_point": [56, 21], "end_point": [56, 23], "text": "t_"}, {"type": "identifier", "children": [], "start_byte": 2531, "end_byte": 2537, "start_point": [56, 23], "end_point": [56, 29], "text": "filena"}], "start_byte": 2516, "end_byte": 2537, "start_point": [56, 8], "end_point": [56, 29], "text": ":create(output_filena"}, {"type": "arguments", "children": [{"type": "(", "children": [], "start_byte": 2537, "end_byte": 2538, "start_point": [56, 29], "end_point": [56, 30], "text": "m"}, {"type": "identifier", "children": [], "start_byte": 2538, "end_byte": 2552, "start_point": [56, 30], "end_point": [56, 44], "text": "e).unwrap();\n\n"}, {"type": ")", "children": [], "start_byte": 2552, "end_byte": 2553, "start_point": [56, 44], "end_point": [56, 45], "text": " "}], "start_byte": 2537, "end_byte": 2553, "start_point": [56, 29], "end_point": [56, 45], "text": "me).unwrap();\n\n "}], "start_byte": 2516, "end_byte": 2553, "start_point": [56, 8], "end_point": [56, 45], "text": ":create(output_filename).unwrap();\n\n "}, {"type": ".", "children": [], "start_byte": 2553, "end_byte": 2554, "start_point": [56, 45], "end_point": [56, 46], "text": " "}, {"type": "field_identifier", "children": [], "start_byte": 2554, "end_byte": 2560, "start_point": [56, 46], "end_point": [56, 52], "text": "      "}], "start_byte": 2516, "end_byte": 2560, "start_point": [56, 8], "end_point": [56, 52], "text": ":create(output_filename).unwrap();\n\n        "}, {"type": "arguments", "children": [{"type": "(", "children": [], "start_byte": 2560, "end_byte": 2561, "start_point": [56, 52], "end_point": [56, 53], "text": "/"}, {"type": ")", "children": [], "start_byte": 2561, "end_byte": 2562, "start_point": [56, 53], "end_point": [56, 54], "text": "/"}], "start_byte": 2560, "end_byte": 2562, "start_point": [56, 52], "end_point": [56, 54], "text": "//"}], "start_byte": 2516, "end_byte": 2562, "start_point": [56, 8], "end_point": [56, 54], "text": ":create(output_filename).unwrap();\n\n        //"}, {"type": ";", "children": [], "start_byte": 2562, "end_byte": 2563, "start_point": [56, 54], "end_point": [56, 55], "text": " "}], "start_byte": 2516, "end_byte": 2563, "start_point": [56, 8], "end_point": [56, 55], "text": ":create(output_filename).unwrap();\n\n        // "}, {"type": "expression_statement", "children": [{"type": "call_expression", "children": [{"type": "field_expression", "children": [{"type": "call_expression", "children": [{"type": "scoped_identifier", "children": [{"type": "scoped_identifier", "children": [{"type": "scoped_identifier", "children": [{"type": "identifier", "children": [], "start_byte": 2572, "end_byte": 2575, "start_point": [57, 8], "end_point": [57, 11], "text": "   "}, {"type": "::", "children": [], "start_byte": 2575, "end_byte": 2577, "start_point": [57, 11], "end_point": [57, 13], "text": "  "}, {"type": "identifier", "children": [], "start_byte": 2577, "end_byte": 2579, "start_point": [57, 13], "end_point": [57, 15], "text": " u"}], "start_byte": 2572, "end_byte": 2579, "start_point": [57, 8], "end_point": [57, 15], "text": "      u"}, {"type": "::", "children": [], "start_byte": 2579, "end_byte": 2581, "start_point": [57, 15], "end_point": [57, 17], "text": "ns"}, {"type": "identifier", "children": [], "start_byte": 2581, "end_byte": 2585, "start_point": [57, 17], "end_point": [57, 21], "text": "afe "}], "start_byte": 2572, "end_byte": 2585, "start_point": [57, 8], "end_point": [57, 21], "text": "      unsafe "}, {"type": "::", "children": [], "start_byte": 2585, "end_byte": 2587, "start_point": [57, 21], "end_point": [57, 23], "text": "{\n"}, {"type": "identifier", "children": [], "start_byte": 2587, "end_byte": 2593, "start_point": [57, 23], "end_point": [57, 29], "text": "      "}], "start_byte": 2572, "end_byte": 2593, "start_point": [57, 8], "end_point": [57, 29], "text": "      unsafe {\n      "}, {"type": "arguments", "children": [{"type": "(", "children": [], "start_byte": 2593, "end_byte": 2594, "start_point": [57, 29], "end_point": [57, 30], "text": " "}, {"type": "identifier", "children": [], "start_byte": 2594, "end_byte": 2609, "start_point": [57, 30], "end_point": [57, 45], "text": "     DELETE_OUT"}, {"type": ")", "children": [], "start_byte": 2609, "end_byte": 2610, "start_point": [57, 45], "end_point": [57, 46], "text": "P"}], "start_byte": 2593, "end_byte": 2610, "start_point": [57, 29], "end_point": [57, 46], "text": "      DELETE_OUTP"}], "start_byte": 2572, "end_byte": 2610, "start_point": [57, 8], "end_point": [57, 46], "text": "      unsafe {\n            DELETE_OUTP"}, {"type": ".", "children": [], "start_byte": 2610, "end_byte": 2611, "start_point": [57, 46], "end_point": [57, 47], "text": "U"}, {"type": "field_identifier", "children": [], "start_byte": 2611, "end_byte": 2617, "start_point": [57, 47], "end_point": [57, 53], "text": "T_ON_I"}], "start_byte": 2572, "end_byte": 2617, "start_point": [57, 8], "end_point": [57, 53], "text": "      unsafe {\n            DELETE_OUTPUT_ON_I"}, {"type": "arguments", "children": [{"type": "(", "children": [], "start_byte": 2617, "end_byte": 2618, "start_point": [57, 53], "end_point": [57, 54], "text": "N"}, {"type": ")", "children": [], "start_byte": 2618, "end_byte": 2619, "start_point": [57, 54], "end_point": [57, 55], "text": "T"}], "start_byte": 2617, "end_byte": 2619, "start_point": [57, 53], "end_point": [57, 55], "text": "NT"}], "start_byte": 2572, "end_byte": 2619, "start_point": [57, 8], "end_point": [57, 55], "text": "      unsafe {\n            DELETE_OUTPUT_ON_INT"}, {"type": ";", "children": [], "start_byte": 2619, "end_byte": 2620, "start_point": [57, 55], "end_point": [57, 56], "text": "E"}], "start_byte": 2572, "end_byte": 2620, "start_point": [57, 8], "end_point": [57, 56], "text": "      unsafe {\n            DELETE_OUTPUT_ON_INTE"}, {"type": "line_comment", "children": [], "start_byte": 2630, "end_byte": 2651, "start_point": [59, 8], "end_point": [59, 29], "text": "ue;\n            OP_MO"}, {"type": "expression_statement", "children": [{"type": "unsafe_block", "children": [{"type": "unsafe", "children": [], "start_byte": 2660, "end_byte": 2666, "start_point": [60, 8], "end_point": [60, 14], "text": "      "}, {"type": "block", "children": [{"type": "{", "children": [], "start_byte": 2667, "end_byte": 2668, "start_point": [60, 15], "end_point": [60, 16], "text": " "}, {"type": "expression_statement", "children": [{"type": "assignment_expression", "children": [{"type": "identifier", "children": [], "start_byte": 2681, "end_byte": 2707, "start_point": [61, 12], "end_point": [61, 38], "text": " 3;\n            IN_NAME.co"}, {"type": "=", "children": [], "start_byte": 2708, "end_byte": 2709, "start_point": [61, 39], "end_point": [61, 40], "text": "y"}, {"type": "boolean_literal", "children": [{"type": "true", "children": [], "start_byte": 2710, "end_byte": 2714, "start_point": [61, 41], "end_point": [61, 45], "text": "from"}], "start_byte": 2710, "end_byte": 2714, "start_point": [61, 41], "end_point": [61, 45], "text": "from"}], "start_byte": 2681, "end_byte": 2714, "start_point": [61, 12], "end_point": [61, 45], "text": " 3;\n            IN_NAME.copy_from"}, {"type": ";", "children": [], "start_byte": 2714, "end_byte": 2715, "start_point": [61, 45], "end_point": [61, 46], "text": "_"}], "start_byte": 2681, "end_byte": 2715, "start_point": [61, 12], "end_point": [61, 46], "text": " 3;\n            IN_NAME.copy_from_"}, {"type": "expression_statement", "children": [{"type": "assignment_expression", "children": [{"type": "identifier", "children": [], "start_byte": 2728, "end_byte": 2735, "start_point": [62, 12], "end_point": [62, 19], "text": "ilename"}, {"type": "=", "children": [], "start_byte": 2736, "end_byte": 2737, "start_point": [62, 20], "end_point": [62, 21], "text": "a"}, {"type": "integer_literal", "children": [], "start_byte": 2738, "end_byte": 2739, "start_point": [62, 22], "end_point": [62, 23], "text": "_"}], "start_byte": 2728, "end_byte": 2739, "start_point": [62, 12], "end_point": [62, 23], "text": "ilename.as_"}, {"type": ";", "children": [], "start_byte": 2739, "end_byte": 2740, "start_point": [62, 23], "end_point": [62, 24], "text": "b"}], "start_byte": 2728, "end_byte": 2740, "start_point": [62, 12], "end_point": [62, 24], "text": "ilename.as_b"}, {"type": "expression_statement", "children": [{"type": "assignment_expression", "children": [{"type": "identifier", "children": [], "start_byte": 2753, "end_byte": 2761, "start_point": [63, 12], "end_point": [63, 20], "text": "        "}, {"type": "=", "children": [], "start_byte": 2762, "end_byte": 2763, "start_point": [63, 21], "end_point": [63, 22], "text": "U"}, {"type": "integer_literal", "children": [], "start_byte": 2764, "end_byte": 2765, "start_point": [63, 23], "end_point": [63, 24], "text": "_"}], "start_byte": 2753, "end_byte": 2765, "start_point": [63, 12], "end_point": [63, 24], "text": "        OUT_"}, {"type": ";", "children": [], "start_byte": 2765, "end_byte": 2766, "start_point": [63, 24], "end_point": [63, 25], "text": "N"}], "start_byte": 2753, "end_byte": 2766, "start_point": [63, 12], "end_point": [63, 25], "text": "        OUT_N"}, {"type": "expression_statement", "children": [{"type": "call_expression", "children": [{"type": "field_expression", "children": [{"type": "identifier", "children": [], "start_byte": 2779, "end_byte": 2786, "start_point": [64, 12], "end_point": [64, 19], "text": "_slice("}, {"type": ".", "children": [], "start_byte": 2786, "end_byte": 2787, "start_point": [64, 19], "end_point": [64, 20], "text": "o"}, {"type": "field_identifier", "children": [], "start_byte": 2787, "end_byte": 2802, "start_point": [64, 20], "end_point": [64, 35], "text": "utput_filename."}], "start_byte": 2779, "end_byte": 2802, "start_point": [64, 12], "end_point": [64, 35], "text": "_slice(output_filename."}, {"type": "arguments", "children": [{"type": "(", "children": [], "start_byte": 2802, "end_byte": 2803, "start_point": [64, 35], "end_point": [64, 36], "text": "a"}, {"type": "call_expression", "children": [{"type": "field_expression", "children": [{"type": "identifier", "children": [], "start_byte": 2803, "end_byte": 2817, "start_point": [64, 36], "end_point": [64, 50], "text": "s_bytes());\n  "}, {"type": ".", "children": [], "start_byte": 2817, "end_byte": 2818, "start_point": [64, 50], "end_point": [64, 51], "text": " "}, {"type": "field_identifier", "children": [], "start_byte": 2818, "end_byte": 2826, "start_point": [64, 51], "end_point": [64, 59], "text": "        "}], "start_byte": 2803, "end_byte": 2826, "start_point": [64, 36], "end_point": [64, 59], "text": "s_bytes());\n           "}, {"type": "arguments", "children": [{"type": "(", "children": [], "start_byte": 2826, "end_byte": 2827, "start_point": [64, 59], "end_point": [64, 60], "text": " "}, {"type": ")", "children": [], "start_byte": 2827, "end_byte": 2828, "start_point": [64, 60], "end_point": [64, 61], "text": "P"}], "start_byte": 2826, "end_byte": 2828, "start_point": [64, 59], "end_point": [64, 61], "text": " P"}], "start_byte": 2803, "end_byte": 2828, "start_point": [64, 36], "end_point": [64, 61], "text": "s_bytes());\n            P"}, {"type": ")", "children": [], "start_byte": 2828, "end_byte": 2829, "start_point": [64, 61], "end_point": [64, 62], "text": "R"}], "start_byte": 2802, "end_byte": 2829, "start_point": [64, 35], "end_point": [64, 62], "text": "as_bytes());\n            PR"}], "start_byte": 2779, "end_byte": 2829, "start_point": [64, 12], "end_point": [64, 62], "text": "_slice(output_filename.as_bytes());\n            PR"}, {"type": ";", "children": [], "start_byte": 2829, "end_byte": 2830, "start_point": [64, 62], "end_point": [64, 63], "text": "O"}], "start_byte": 2779, "end_byte": 2830, "start_point": [64, 12], "end_point": [64, 63], "text": "_slice(output_filename.as_bytes());\n            PRO"}, {"type": "expression_statement", "children": [{"type": "call_expression", "children": [{"type": "field_expression", "children": [{"type": "identifier", "children": [], "start_byte": 2843, "end_byte": 2851, "start_point": [65, 12], "end_point": [65, 20], "text": "rom_slic"}, {"type": ".", "children": [], "start_byte": 2851, "end_byte": 2852, "start_point": [65, 20], "end_point": [65, 21], "text": "e"}, {"type": "field_identifier", "children": [], "start_byte": 2852, "end_byte": 2867, "start_point": [65, 21], "end_point": [65, 36], "text": "(b\"test_prog\");"}], "start_byte": 2843, "end_byte": 2867, "start_point": [65, 12], "end_point": [65, 36], "text": "rom_slice(b\"test_prog\");"}, {"type": "arguments", "children": [{"type": "(", "children": [], "start_byte": 2867, "end_byte": 2868, "start_point": [65, 36], "end_point": [65, 37], "text": "\n"}, {"type": "call_expression", "children": [{"type": "field_expression", "children": [{"type": "identifier", "children": [], "start_byte": 2868, "end_byte": 2883, "start_point": [65, 37], "end_point": [65, 52], "text": "        }\n\n    "}, {"type": ".", "children": [], "start_byte": 2883, "end_byte": 2884, "start_point": [65, 52], "end_point": [65, 53], "text": " "}, {"type": "field_identifier", "children": [], "start_byte": 2884, "end_byte": 2892, "start_point": [65, 53], "end_point": [65, 61], "text": "   // \u8c03\u7528"}], "start_byte": 2868, "end_byte": 2892, "start_point": [65, 37], "end_point": [65, 61], "text": "        }\n\n        // \u8c03\u7528"}, {"type": "arguments", "children": [{"type": "(", "children": [], "start_byte": 2892, "end_byte": 2893, "start_point": [65, 61], "end_point": [65, 62], "text": "\u51fd"}, {"type": ")", "children": [], "start_byte": 2893, "end_byte": 2894, "start_point": [65, 62], "end_point": [65, 63], "text": "\u6570"}], "start_byte": 2892, "end_byte": 2894, "start_point": [65, 61], "end_point": [65, 63], "text": "\u51fd\u6570"}], "start_byte": 2868, "end_byte": 2894, "start_point": [65, 37], "end_point": [65, 63], "text": "        }\n\n        // \u8c03\u7528\u51fd\u6570"}, {"type": ")", "children": [], "start_byte": 2894, "end_byte": 2895, "start_point": [65, 63], "end_point": [65, 64], "text": "\u5e76"}], "start_byte": 2867, "end_byte": 2895, "start_point": [65, 36], "end_point": [65, 64], "text": "\n        }\n\n        // \u8c03\u7528\u51fd\u6570\u5e76"}], "start_byte": 2843, "end_byte": 2895, "start_point": [65, 12], "end_point": [65, 64], "text": "rom_slice(b\"test_prog\");\n        }\n\n        // \u8c03\u7528\u51fd\u6570\u5e76"}, {"type": ";", "children": [], "start_byte": 2895, "end_byte": 2896, "start_point": [65, 64], "end_point": [65, 65], "text": "\u5ffd"}], "start_byte": 2843, "end_byte": 2896, "start_point": [65, 12], "end_point": [65, 65], "text": "rom_slice(b\"test_prog\");\n        }\n\n        // \u8c03\u7528\u51fd\u6570\u5e76\u5ffd"}, {"type": "expression_statement", "children": [{"type": "call_expression", "children": [{"type": "field_expression", "children": [{"type": "identifier", "children": [], "start_byte": 2909, "end_byte": 2918, "start_point": [66, 12], "end_point": [66, 21], "text": "\uff09\n       "}, {"type": ".", "children": [], "start_byte": 2918, "end_byte": 2919, "start_point": [66, 21], "end_point": [66, 22], "text": " "}, {"type": "field_identifier", "children": [], "start_byte": 2919, "end_byte": 2934, "start_point": [66, 22], "end_point": [66, 37], "text": "let _ = std::pa"}], "start_byte": 2909, "end_byte": 2934, "start_point": [66, 12], "end_point": [66, 37], "text": "\uff09\n        let _ = std::pa"}, {"type": "arguments", "children": [{"type": "(", "children": [], "start_byte": 2934, "end_byte": 2935, "start_point": [66, 37], "end_point": [66, 38], "text": "n"}, {"type": "string_literal", "children": [{"type": "\"", "children": [], "start_byte": 2935, "end_byte": 2937, "start_point": [66, 38], "end_point": [66, 40], "text": "ic"}, {"type": "\"", "children": [], "start_byte": 2946, "end_byte": 2947, "start_point": [66, 49], "end_point": [66, 50], "text": "n"}], "start_byte": 2935, "end_byte": 2947, "start_point": [66, 38], "end_point": [66, 50], "text": "ic::catch_un"}, {"type": ")", "children": [], "start_byte": 2947, "end_byte": 2948, "start_point": [66, 50], "end_point": [66, 51], "text": "w"}], "start_byte": 2934, "end_byte": 2948, "start_point": [66, 37], "end_point": [66, 51], "text": "nic::catch_unw"}], "start_byte": 2909, "end_byte": 2948, "start_point": [66, 12], "end_point": [66, 51], "text": "\uff09\n        let _ = std::panic::catch_unw"}, {"type": ";", "children": [], "start_byte": 2948, "end_byte": 2949, "start_point": [66, 51], "end_point": [66, 52], "text": "i"}], "start_byte": 2909, "end_byte": 2949, "start_point": [66, 12], "end_point": [66, 52], "text": "\uff09\n        let _ = std::panic::catch_unwi"}, {"type": "}", "children": [], "start_byte": 2958, "end_byte": 2959, "start_point": [67, 8], "end_point": [67, 9], "text": " "}], "start_byte": 2667, "end_byte": 2959, "start_point": [60, 15], "end_point": [67, 9], "text": "    SRC_MODE = 3;\n            IN_NAME.copy_from_slice(input_filename.as_bytes());\n            OUT_NAME.copy_from_slice(output_filename.as_bytes());\n            PROG_NAME.copy_from_slice(b\"test_prog\");\n        }\n\n        // \u8c03\u7528\u51fd\u6570\u5e76\u5ffd\u7565\u8fd4\u56de\u503c\uff08\u56e0\u4e3a\u8be5\u51fd\u6570\u4e0d\u8fd4\u56de\uff09\n        let _ = std::panic::catch_unwind(|| {\n  "}], "start_byte": 2660, "end_byte": 2959, "start_point": [60, 8], "end_point": [67, 9], "text": "           SRC_MODE = 3;\n            IN_NAME.copy_from_slice(input_filename.as_bytes());\n            OUT_NAME.copy_from_slice(output_filename.as_bytes());\n            PROG_NAME.copy_from_slice(b\"test_prog\");\n        }\n\n        // \u8c03\u7528\u51fd\u6570\u5e76\u5ffd\u7565\u8fd4\u56de\u503c\uff08\u56e0\u4e3a\u8be5\u51fd\u6570\u4e0d\u8fd4\u56de\uff09\n        let _ = std::panic::catch_unwind(|| {\n  "}], "start_byte": 2660, "end_byte": 2959, "start_point": [60, 8], "end_point": [67, 9], "text": "           SRC_MODE = 3;\n            IN_NAME.copy_from_slice(input_filename.as_bytes());\n            OUT_NAME.copy_from_slice(output_filename.as_bytes());\n            PROG_NAME.copy_from_slice(b\"test_prog\");\n        }\n\n        // \u8c03\u7528\u51fd\u6570\u5e76\u5ffd\u7565\u8fd4\u56de\u503c\uff08\u56e0\u4e3a\u8be5\u51fd\u6570\u4e0d\u8fd4\u56de\uff09\n        let _ = std::panic::catch_unwind(|| {\n  "}, {"type": "line_comment", "children": [], "start_byte": 2969, "end_byte": 3032, "start_point": [69, 8], "end_point": [69, 71], "text": "clean_up_and_fail(1);\n        });\n\n        // \u786e\u4fdd\u8f93\u51fa\u6587\u4ef6\u5df2\u88ab\u5220\u9664\n      "}, {"type": "let_declaration", "children": [{"type": "let", "children": [], "start_byte": 3041, "end_byte": 3044, "start_point": [70, 8], "end_point": [70, 11], "text": "(!s"}, {"type": "_", "children": [], "start_byte": 3045, "end_byte": 3046, "start_point": [70, 12], "end_point": [70, 13], "text": "d"}, {"type": "=", "children": [], "start_byte": 3047, "end_byte": 3048, "start_point": [70, 14], "end_point": [70, 15], "text": ":"}, {"type": "call_expression", "children": [{"type": "scoped_identifier", "children": [{"type": "scoped_identifier", "children": [{"type": "identifier", "children": [], "start_byte": 3049, "end_byte": 3052, "start_point": [70, 16], "end_point": [70, 19], "text": "ath"}, {"type": "::", "children": [], "start_byte": 3052, "end_byte": 3054, "start_point": [70, 19], "end_point": [70, 21], "text": "::"}, {"type": "identifier", "children": [], "start_byte": 3054, "end_byte": 3059, "start_point": [70, 21], "end_point": [70, 26], "text": "Path:"}], "start_byte": 3049, "end_byte": 3059, "start_point": [70, 16], "end_point": [70, 26], "text": "ath::Path:"}, {"type": "::", "children": [], "start_byte": 3059, "end_byte": 3061, "start_point": [70, 26], "end_point": [70, 28], "text": ":n"}, {"type": "identifier", "children": [], "start_byte": 3061, "end_byte": 3073, "start_point": [70, 28], "end_point": [70, 40], "text": "ew(output_fi"}], "start_byte": 3049, "end_byte": 3073, "start_point": [70, 16], "end_point": [70, 40], "text": "ath::Path::new(output_fi"}, {"type": "arguments", "children": [{"type": "(", "children": [], "start_byte": 3073, "end_byte": 3074, "start_point": [70, 40], "end_point": [70, 41], "text": "l"}, {"type": "closure_expression", "children": [{"type": "closure_parameters", "children": [{"type": "|", "children": [], "start_byte": 3074, "end_byte": 3075, "start_point": [70, 41], "end_point": [70, 42], "text": "e"}, {"type": "|", "children": [], "start_byte": 3075, "end_byte": 3076, "start_point": [70, 42], "end_point": [70, 43], "text": "n"}], "start_byte": 3074, "end_byte": 3076, "start_point": [70, 41], "end_point": [70, 43], "text": "en"}, {"type": "block", "children": [{"type": "{", "children": [], "start_byte": 3077, "end_byte": 3078, "start_point": [70, 44], "end_point": [70, 45], "text": "m"}, {"type": "expression_statement", "children": [{"type": "call_expression", "children": [{"type": "identifier", "children": [], "start_byte": 3091, "end_byte": 3108, "start_point": [71, 12], "end_point": [71, 29], "text": "\n        std::fs:"}, {"type": "arguments", "children": [{"type": "(", "children": [], "start_byte": 3108, "end_byte": 3109, "start_point": [71, 29], "end_point": [71, 30], "text": ":"}, {"type": "integer_literal", "children": [], "start_byte": 3109, "end_byte": 3110, "start_point": [71, 30], "end_point": [71, 31], "text": "r"}, {"type": ")", "children": [], "start_byte": 3110, "end_byte": 3111, "start_point": [71, 31], "end_point": [71, 32], "text": "e"}], "start_byte": 3108, "end_byte": 3111, "start_point": [71, 29], "end_point": [71, 32], "text": ":re"}], "start_byte": 3091, "end_byte": 3111, "start_point": [71, 12], "end_point": [71, 32], "text": "\n        std::fs::re"}, {"type": ";", "children": [], "start_byte": 3111, "end_byte": 3112, "start_point": [71, 32], "end_point": [71, 33], "text": "m"}], "start_byte": 3091, "end_byte": 3112, "start_point": [71, 12], "end_point": [71, 33], "text": "\n        std::fs::rem"}, {"type": "}", "children": [], "start_byte": 3121, "end_byte": 3122, "start_point": [72, 8], "end_point": [72, 9], "text": "i"}], "start_byte": 3077, "end_byte": 3122, "start_point": [70, 44], "end_point": [72, 9], "text": "me).exists());\n        std::fs::remove_file(i"}], "start_byte": 3074, "end_byte": 3122, "start_point": [70, 41], "end_point": [72, 9], "text": "ename).exists());\n        std::fs::remove_file(i"}, {"type": ")", "children": [], "start_byte": 3122, "end_byte": 3123, "start_point": [72, 9], "end_point": [72, 10], "text": "n"}], "start_byte": 3073, "end_byte": 3123, "start_point": [70, 40], "end_point": [72, 10], "text": "lename).exists());\n        std::fs::remove_file(in"}], "start_byte": 3049, "end_byte": 3123, "start_point": [70, 16], "end_point": [72, 10], "text": "ath::Path::new(output_filename).exists());\n        std::fs::remove_file(in"}, {"type": ";", "children": [], "start_byte": 3123, "end_byte": 3124, "start_point": [72, 10], "end_point": [72, 11], "text": "p"}], "start_byte": 3041, "end_byte": 3124, "start_point": [70, 8], "end_point": [72, 11], "text": "(!std::path::Path::new(output_filename).exists());\n        std::fs::remove_file(inp"}, {"type": "line_comment", "children": [], "start_byte": 3134, "end_byte": 3167, "start_point": [74, 8], "end_point": [74, 41], "text": "e).unwrap(); // \u6e05\u9664\u6d4b\u8bd5\u6587\u4ef6\n    }\n\n   "}, {"type": "expression_statement", "children": [{"type": "macro_invocation", "children": [{"type": "identifier", "children": [], "start_byte": 3176, "end_byte": 3182, "start_point": [75, 8], "end_point": [75, 14], "text": "    #["}, {"type": "!", "children": [], "start_byte": 3182, "end_byte": 3183, "start_point": [75, 14], "end_point": [75, 15], "text": "s"}, {"type": "token_tree", "children": [{"type": "(", "children": [], "start_byte": 3183, "end_byte": 3184, "start_point": [75, 15], "end_point": [75, 16], "text": "h"}, {"type": "identifier", "children": [], "start_byte": 3185, "end_byte": 3188, "start_point": [75, 17], "end_point": [75, 20], "text": "uld"}, {"type": "identifier", "children": [], "start_byte": 3190, "end_byte": 3194, "start_point": [75, 22], "end_point": [75, 26], "text": "anic"}, {"type": "identifier", "children": [], "start_byte": 3196, "end_byte": 3200, "start_point": [75, 28], "end_point": [75, 32], "text": "xpec"}, {"type": "identifier", "children": [], "start_byte": 3202, "end_byte": 3205, "start_point": [75, 34], "end_point": [75, 37], "text": "d ="}, {"type": "token_tree", "children": [{"type": "(", "children": [], "start_byte": 3205, "end_byte": 3206, "start_point": [75, 37], "end_point": [75, 38], "text": " "}, {"type": "identifier", "children": [], "start_byte": 3206, "end_byte": 3221, "start_point": [75, 38], "end_point": [75, 53], "text": "\"process::exit\""}, {"type": ")", "children": [], "start_byte": 3221, "end_byte": 3222, "start_point": [75, 53], "end_point": [75, 54], "text": ")"}], "start_byte": 3205, "end_byte": 3222, "start_point": [75, 37], "end_point": [75, 54], "text": " \"process::exit\")"}, {"type": "identifier", "children": [], "start_byte": 3223, "end_byte": 3229, "start_point": [75, 55], "end_point": [75, 61], "text": "\n    f"}, {"type": "token_tree", "children": [{"type": "(", "children": [], "start_byte": 3229, "end_byte": 3230, "start_point": [75, 61], "end_point": [75, 62], "text": "n"}, {"type": ")", "children": [], "start_byte": 3230, "end_byte": 3231, "start_point": [75, 62], "end_point": [75, 63], "text": " "}], "start_byte": 3229, "end_byte": 3231, "start_point": [75, 61], "end_point": [75, 63], "text": "n "}, {"type": ")", "children": [], "start_byte": 3231, "end_byte": 3232, "start_point": [75, 63], "end_point": [75, 64], "text": "t"}], "start_byte": 3183, "end_byte": 3232, "start_point": [75, 15], "end_point": [75, 64], "text": "hould_panic(expected = \"process::exit\")]\n    fn t"}], "start_byte": 3176, "end_byte": 3232, "start_point": [75, 8], "end_point": [75, 64], "text": "    #[should_panic(expected = \"process::exit\")]\n    fn t"}, {"type": ";", "children": [], "start_byte": 3232, "end_byte": 3233, "start_point": [75, 64], "end_point": [75, 65], "text": "e"}], "start_byte": 3176, "end_byte": 3233, "start_point": [75, 8], "end_point": [75, 65], "text": "    #[should_panic(expected = \"process::exit\")]\n    fn te"}, {"type": "expression_statement", "children": [{"type": "call_expression", "children": [{"type": "field_expression", "children": [{"type": "call_expression", "children": [{"type": "scoped_identifier", "children": [{"type": "scoped_identifier", "children": [{"type": "identifier", "children": [], "start_byte": 3242, "end_byte": 3245, "start_point": [76, 8], "end_point": [76, 11], "text": "g_i"}, {"type": "::", "children": [], "start_byte": 3245, "end_byte": 3247, "start_point": [76, 11], "end_point": [76, 13], "text": "np"}, {"type": "identifier", "children": [], "start_byte": 3247, "end_byte": 3249, "start_point": [76, 13], "end_point": [76, 15], "text": "ut"}], "start_byte": 3242, "end_byte": 3249, "start_point": [76, 8], "end_point": [76, 15], "text": "g_input"}, {"type": "::", "children": [], "start_byte": 3249, "end_byte": 3251, "start_point": [76, 15], "end_point": [76, 17], "text": "_f"}, {"type": "identifier", "children": [], "start_byte": 3251, "end_byte": 3262, "start_point": [76, 17], "end_point": [76, 28], "text": "ile_warning"}], "start_byte": 3242, "end_byte": 3262, "start_point": [76, 8], "end_point": [76, 28], "text": "g_input_file_warning"}, {"type": "arguments", "children": [{"type": "(", "children": [], "start_byte": 3262, "end_byte": 3263, "start_point": [76, 28], "end_point": [76, 29], "text": "("}, {"type": "identifier", "children": [], "start_byte": 3263, "end_byte": 3277, "start_point": [76, 29], "end_point": [76, 43], "text": ") {\n        le"}, {"type": ")", "children": [], "start_byte": 3277, "end_byte": 3278, "start_point": [76, 43], "end_point": [76, 44], "text": "t"}], "start_byte": 3262, "end_byte": 3278, "start_point": [76, 28], "end_point": [76, 44], "text": "() {\n        let"}], "start_byte": 3242, "end_byte": 3278, "start_point": [76, 8], "end_point": [76, 44], "text": "g_input_file_warning() {\n        let"}, {"type": ".", "children": [], "start_byte": 3278, "end_byte": 3279, "start_point": [76, 44], "end_point": [76, 45], "text": " "}, {"type": "field_identifier", "children": [], "start_byte": 3279, "end_byte": 3285, "start_point": [76, 45], "end_point": [76, 51], "text": "input_"}], "start_byte": 3242, "end_byte": 3285, "start_point": [76, 8], "end_point": [76, 51], "text": "g_input_file_warning() {\n        let input_"}, {"type": "arguments", "children": [{"type": "(", "children": [], "start_byte": 3285, "end_byte": 3286, "start_point": [76, 51], "end_point": [76, 52], "text": "f"}, {"type": ")", "children": [], "start_byte": 3286, "end_byte": 3287, "start_point": [76, 52], "end_point": [76, 53], "text": "i"}], "start_byte": 3285, "end_byte": 3287, "start_point": [76, 51], "end_point": [76, 53], "text": "fi"}], "start_byte": 3242, "end_byte": 3287, "start_point": [76, 8], "end_point": [76, 53], "text": "g_input_file_warning() {\n        let input_fi"}, {"type": ";", "children": [], "start_byte": 3287, "end_byte": 3288, "start_point": [76, 53], "end_point": [76, 54], "text": "l"}], "start_byte": 3242, "end_byte": 3288, "start_point": [76, 8], "end_point": [76, 54], "text": "g_input_file_warning() {\n        let input_fil"}, {"type": "line_comment", "children": [], "start_byte": 3289, "end_byte": 3310, "start_point": [76, 55], "end_point": [76, 76], "text": "name = \"nonexistent_i"}, {"type": "}", "children": [], "start_byte": 3315, "end_byte": 3316, "start_point": [77, 4], "end_point": [77, 5], "text": "t"}], "start_byte": 2352, "end_byte": 3316, "start_point": [51, 41], "end_point": [77, 5], "text": "ut.txt\";\n        let output_filename = \"test_output.txt\";\n\n        // \u521b\u5efa\u4e00\u4e2a\u5047\u7684\u8f93\u5165\u6587\u4ef6\u548c\u8f93\u51fa\u6587\u4ef6\n        std::fs::File::create(input_filename).unwrap();\n        std::fs::File::create(output_filename).unwrap();\n\n        // \u8bbe\u7f6e\u5168\u5c40\u53d8\u91cf\n        unsafe {\n            DELETE_OUTPUT_ON_INTERRUPT = true;\n            OP_MODE = 1;\n            SRC_MODE = 3;\n            IN_NAME.copy_from_slice(input_filename.as_bytes());\n            OUT_NAME.copy_from_slice(output_filename.as_bytes());\n            PROG_NAME.copy_from_slice(b\"test_prog\");\n        }\n\n        // \u8c03\u7528\u51fd\u6570\u5e76\u5ffd\u7565\u8fd4\u56de\u503c\uff08\u56e0\u4e3a\u8be5\u51fd\u6570\u4e0d\u8fd4\u56de\uff09\n        let _ = std::panic::catch_unwind(|| {\n            clean_up_and_fail(1);\n        });\n\n        // \u786e\u4fdd\u8f93\u51fa\u6587\u4ef6\u5df2\u88ab\u5220\u9664\n        assert!(!std::path::Path::new(output_filename).exists());\n        std::fs::remove_file(input_filename).unwrap(); // \u6e05\u9664\u6d4b\u8bd5\u6587\u4ef6\n    }\n\n    #[test]\n    #[should_panic(expected = \"process::exit\")]\n    fn test_missing_input_file_warning() {\n        let input_filename = \"nonexistent_input.t"}], "start_byte": 2315, "end_byte": 3316, "start_point": [51, 4], "end_point": [77, 5], "text": "       let input_filename = \"test_input.txt\";\n        let output_filename = \"test_output.txt\";\n\n        // \u521b\u5efa\u4e00\u4e2a\u5047\u7684\u8f93\u5165\u6587\u4ef6\u548c\u8f93\u51fa\u6587\u4ef6\n        std::fs::File::create(input_filename).unwrap();\n        std::fs::File::create(output_filename).unwrap();\n\n        // \u8bbe\u7f6e\u5168\u5c40\u53d8\u91cf\n        unsafe {\n            DELETE_OUTPUT_ON_INTERRUPT = true;\n            OP_MODE = 1;\n            SRC_MODE = 3;\n            IN_NAME.copy_from_slice(input_filename.as_bytes());\n            OUT_NAME.copy_from_slice(output_filename.as_bytes());\n            PROG_NAME.copy_from_slice(b\"test_prog\");\n        }\n\n        // \u8c03\u7528\u51fd\u6570\u5e76\u5ffd\u7565\u8fd4\u56de\u503c\uff08\u56e0\u4e3a\u8be5\u51fd\u6570\u4e0d\u8fd4\u56de\uff09\n        let _ = std::panic::catch_unwind(|| {\n            clean_up_and_fail(1);\n        });\n\n        // \u786e\u4fdd\u8f93\u51fa\u6587\u4ef6\u5df2\u88ab\u5220\u9664\n        assert!(!std::path::Path::new(output_filename).exists());\n        std::fs::remove_file(input_filename).unwrap(); // \u6e05\u9664\u6d4b\u8bd5\u6587\u4ef6\n    }\n\n    #[test]\n    #[should_panic(expected = \"process::exit\")]\n    fn test_missing_input_file_warning() {\n        let input_filename = \"nonexistent_input.t"}, {"type": "attribute_item", "children": [{"type": "#", "children": [], "start_byte": 3322, "end_byte": 3323, "start_point": [79, 4], "end_point": [79, 5], "text": " "}, {"type": "[", "children": [], "start_byte": 3323, "end_byte": 3324, "start_point": [79, 5], "end_point": [79, 6], "text": " "}, {"type": "attribute", "children": [{"type": "identifier", "children": [], "start_byte": 3324, "end_byte": 3328, "start_point": [79, 6], "end_point": [79, 10], "text": "    "}], "start_byte": 3324, "end_byte": 3328, "start_point": [79, 6], "end_point": [79, 10], "text": "    "}, {"type": "]", "children": [], "start_byte": 3328, "end_byte": 3329, "start_point": [79, 10], "end_point": [79, 11], "text": " "}], "start_byte": 3322, "end_byte": 3329, "start_point": [79, 4], "end_point": [79, 11], "text": "       "}, {"type": "attribute_item", "children": [{"type": "#", "children": [], "start_byte": 3334, "end_byte": 3335, "start_point": [80, 4], "end_point": [80, 5], "text": "u"}, {"type": "[", "children": [], "start_byte": 3335, "end_byte": 3336, "start_point": [80, 5], "end_point": [80, 6], "text": "t"}, {"type": "attribute", "children": [{"type": "identifier", "children": [], "start_byte": 3336, "end_byte": 3348, "start_point": [80, 6], "end_point": [80, 18], "text": "put_filename"}, {"type": "token_tree", "children": [{"type": "(", "children": [], "start_byte": 3348, "end_byte": 3349, "start_point": [80, 18], "end_point": [80, 19], "text": " "}, {"type": "identifier", "children": [], "start_byte": 3349, "end_byte": 3357, "start_point": [80, 19], "end_point": [80, 27], "text": "= \"test_"}, {"type": "string_literal", "children": [{"type": "\"", "children": [], "start_byte": 3360, "end_byte": 3361, "start_point": [80, 30], "end_point": [80, 31], "text": "p"}, {"type": "\"", "children": [], "start_byte": 3374, "end_byte": 3375, "start_point": [80, 44], "end_point": [80, 45], "text": " "}], "start_byte": 3360, "end_byte": 3375, "start_point": [80, 30], "end_point": [80, 45], "text": "put.txt\";\n\n    "}, {"type": ")", "children": [], "start_byte": 3375, "end_byte": 3376, "start_point": [80, 45], "end_point": [80, 46], "text": " "}], "start_byte": 3348, "end_byte": 3376, "start_point": [80, 18], "end_point": [80, 46], "text": " = \"test_output.txt\";\n\n     "}], "start_byte": 3336, "end_byte": 3376, "start_point": [80, 6], "end_point": [80, 46], "text": "put_filename = \"test_output.txt\";\n\n     "}, {"type": "]", "children": [], "start_byte": 3376, "end_byte": 3377, "start_point": [80, 46], "end_point": [80, 47], "text": " "}], "start_byte": 3334, "end_byte": 3377, "start_point": [80, 4], "end_point": [80, 47], "text": "utput_filename = \"test_output.txt\";\n\n      "}, {"type": "function_item", "children": [{"type": "fn", "children": [], "start_byte": 3382, "end_byte": 3384, "start_point": [81, 4], "end_point": [81, 6], "text": "\u8bbe\u7f6e"}, {"type": "identifier", "children": [], "start_byte": 3385, "end_byte": 3416, "start_point": [81, 7], "end_point": [81, 38], "text": "\u5c40\u53d8\u91cf\n        unsafe {\n          "}, {"type": "parameters", "children": [{"type": "(", "children": [], "start_byte": 3416, "end_byte": 3417, "start_point": [81, 38], "end_point": [81, 39], "text": " "}, {"type": ")", "children": [], "start_byte": 3417, "end_byte": 3418, "start_point": [81, 39], "end_point": [81, 40], "text": " "}], "start_byte": 3416, "end_byte": 3418, "start_point": [81, 38], "end_point": [81, 40], "text": "  "}, {"type": "block", "children": [{"type": "{", "children": [], "start_byte": 3419, "end_byte": 3420, "start_point": [81, 41], "end_point": [81, 42], "text": "E"}, {"type": "let_declaration", "children": [{"type": "let", "children": [], "start_byte": 3429, "end_byte": 3432, "start_point": [82, 8], "end_point": [82, 11], "text": "UT_"}, {"type": "identifier", "children": [], "start_byte": 3433, "end_byte": 3447, "start_point": [82, 12], "end_point": [82, 26], "text": "N_INTERRUPT = "}, {"type": "=", "children": [], "start_byte": 3448, "end_byte": 3449, "start_point": [82, 27], "end_point": [82, 28], "text": "a"}, {"type": "string_literal", "children": [{"type": "\"", "children": [], "start_byte": 3450, "end_byte": 3451, "start_point": [82, 29], "end_point": [82, 30], "text": "s"}, {"type": "\"", "children": [], "start_byte": 3472, "end_byte": 3473, "start_point": [82, 51], "end_point": [82, 52], "text": "E"}], "start_byte": 3450, "end_byte": 3473, "start_point": [82, 29], "end_point": [82, 52], "text": "se;\n            OP_MODE"}, {"type": ";", "children": [], "start_byte": 3473, "end_byte": 3474, "start_point": [82, 52], "end_point": [82, 53], "text": " "}], "start_byte": 3429, "end_byte": 3474, "start_point": [82, 8], "end_point": [82, 53], "text": "UT_ON_INTERRUPT = false;\n            OP_MODE "}, {"type": "let_declaration", "children": [{"type": "let", "children": [], "start_byte": 3483, "end_byte": 3486, "start_point": [83, 8], "end_point": [83, 11], "text": "   "}, {"type": "identifier", "children": [], "start_byte": 3487, "end_byte": 3502, "start_point": [83, 12], "end_point": [83, 27], "text": "    SRC_MODE = "}, {"type": "=", "children": [], "start_byte": 3503, "end_byte": 3504, "start_point": [83, 28], "end_point": [83, 29], "text": ";"}, {"type": "string_literal", "children": [{"type": "\"", "children": [], "start_byte": 3505, "end_byte": 3506, "start_point": [83, 30], "end_point": [83, 31], "text": " "}, {"type": "\"", "children": [], "start_byte": 3521, "end_byte": 3522, "start_point": [83, 46], "end_point": [83, 47], "text": "O"}], "start_byte": 3505, "end_byte": 3522, "start_point": [83, 30], "end_point": [83, 47], "text": "            VERBO"}, {"type": ";", "children": [], "start_byte": 3522, "end_byte": 3523, "start_point": [83, 47], "end_point": [83, 48], "text": "S"}], "start_byte": 3483, "end_byte": 3523, "start_point": [83, 8], "end_point": [83, 48], "text": "        SRC_MODE = 1;\n            VERBOS"}, {"type": "line_comment", "children": [], "start_byte": 3533, "end_byte": 3554, "start_point": [85, 8], "end_point": [85, 29], "text": "           IN_NAME.co"}, {"type": "expression_statement", "children": [{"type": "unsafe_block", "children": [{"type": "unsafe", "children": [], "start_byte": 3563, "end_byte": 3569, "start_point": [86, 8], "end_point": [86, 14], "text": "lice(i"}, {"type": "block", "children": [{"type": "{", "children": [], "start_byte": 3570, "end_byte": 3571, "start_point": [86, 15], "end_point": [86, 16], "text": "p"}, {"type": "expression_statement", "children": [{"type": "assignment_expression", "children": [{"type": "identifier", "children": [], "start_byte": 3584, "end_byte": 3610, "start_point": [87, 12], "end_point": [87, 38], "text": "s_bytes());\n            OU"}, {"type": "=", "children": [], "start_byte": 3611, "end_byte": 3612, "start_point": [87, 39], "end_point": [87, 40], "text": "_"}, {"type": "boolean_literal", "children": [{"type": "false", "children": [], "start_byte": 3613, "end_byte": 3618, "start_point": [87, 41], "end_point": [87, 46], "text": "AME.c"}], "start_byte": 3613, "end_byte": 3618, "start_point": [87, 41], "end_point": [87, 46], "text": "AME.c"}], "start_byte": 3584, "end_byte": 3618, "start_point": [87, 12], "end_point": [87, 46], "text": "s_bytes());\n            OUT_NAME.c"}, {"type": ";", "children": [], "start_byte": 3618, "end_byte": 3619, "start_point": [87, 46], "end_point": [87, 47], "text": "o"}], "start_byte": 3584, "end_byte": 3619, "start_point": [87, 12], "end_point": [87, 47], "text": "s_bytes());\n            OUT_NAME.co"}, {"type": "expression_statement", "children": [{"type": "assignment_expression", "children": [{"type": "identifier", "children": [], "start_byte": 3632, "end_byte": 3639, "start_point": [88, 12], "end_point": [88, 19], "text": "(output"}, {"type": "=", "children": [], "start_byte": 3640, "end_byte": 3641, "start_point": [88, 20], "end_point": [88, 21], "text": "f"}, {"type": "integer_literal", "children": [], "start_byte": 3642, "end_byte": 3643, "start_point": [88, 22], "end_point": [88, 23], "text": "l"}], "start_byte": 3632, "end_byte": 3643, "start_point": [88, 12], "end_point": [88, 23], "text": "(output_fil"}, {"type": ";", "children": [], "start_byte": 3643, "end_byte": 3644, "start_point": [88, 23], "end_point": [88, 24], "text": "e"}], "start_byte": 3632, "end_byte": 3644, "start_point": [88, 12], "end_point": [88, 24], "text": "(output_file"}, {"type": "expression_statement", "children": [{"type": "assignment_expression", "children": [{"type": "identifier", "children": [], "start_byte": 3657, "end_byte": 3665, "start_point": [89, 12], "end_point": [89, 20], "text": "());\n   "}, {"type": "=", "children": [], "start_byte": 3666, "end_byte": 3667, "start_point": [89, 21], "end_point": [89, 22], "text": " "}, {"type": "integer_literal", "children": [], "start_byte": 3668, "end_byte": 3669, "start_point": [89, 23], "end_point": [89, 24], "text": " "}], "start_byte": 3657, "end_byte": 3669, "start_point": [89, 12], "end_point": [89, 24], "text": "());\n       "}, {"type": ";", "children": [], "start_byte": 3669, "end_byte": 3670, "start_point": [89, 24], "end_point": [89, 25], "text": " "}], "start_byte": 3657, "end_byte": 3670, "start_point": [89, 12], "end_point": [89, 25], "text": "());\n        "}, {"type": "expression_statement", "children": [{"type": "assignment_expression", "children": [{"type": "identifier", "children": [], "start_byte": 3683, "end_byte": 3692, "start_point": [90, 12], "end_point": [90, 21], "text": ".copy_fro"}, {"type": "=", "children": [], "start_byte": 3693, "end_byte": 3694, "start_point": [90, 22], "end_point": [90, 23], "text": "_"}, {"type": "integer_literal", "children": [], "start_byte": 3695, "end_byte": 3696, "start_point": [90, 24], "end_point": [90, 25], "text": "l"}], "start_byte": 3683, "end_byte": 3696, "start_point": [90, 12], "end_point": [90, 25], "text": ".copy_from_sl"}, {"type": ";", "children": [], "start_byte": 3696, "end_byte": 3697, "start_point": [90, 25], "end_point": [90, 26], "text": "i"}], "start_byte": 3683, "end_byte": 3697, "start_point": [90, 12], "end_point": [90, 26], "text": ".copy_from_sli"}, {"type": "expression_statement", "children": [{"type": "call_expression", "children": [{"type": "field_expression", "children": [{"type": "identifier", "children": [], "start_byte": 3710, "end_byte": 3717, "start_point": [91, 12], "end_point": [91, 19], "text": "g\");\n  "}, {"type": ".", "children": [], "start_byte": 3717, "end_byte": 3718, "start_point": [91, 19], "end_point": [91, 20], "text": " "}, {"type": "field_identifier", "children": [], "start_byte": 3718, "end_byte": 3733, "start_point": [91, 20], "end_point": [91, 35], "text": "     }\n\n       "}], "start_byte": 3710, "end_byte": 3733, "start_point": [91, 12], "end_point": [91, 35], "text": "g\");\n        }\n\n       "}, {"type": "arguments", "children": [{"type": "(", "children": [], "start_byte": 3733, "end_byte": 3734, "start_point": [91, 35], "end_point": [91, 36], "text": " "}, {"type": "call_expression", "children": [{"type": "field_expression", "children": [{"type": "identifier", "children": [], "start_byte": 3734, "end_byte": 3748, "start_point": [91, 36], "end_point": [91, 50], "text": "// \u8c03\u7528\u51fd\u6570\u5e76\u671f\u5f85\u5b83\u8c03\u7528 "}, {"type": ".", "children": [], "start_byte": 3748, "end_byte": 3749, "start_point": [91, 50], "end_point": [91, 51], "text": "p"}, {"type": "field_identifier", "children": [], "start_byte": 3749, "end_byte": 3757, "start_point": [91, 51], "end_point": [91, 59], "text": "rocess::"}], "start_byte": 3734, "end_byte": 3757, "start_point": [91, 36], "end_point": [91, 59], "text": "// \u8c03\u7528\u51fd\u6570\u5e76\u671f\u5f85\u5b83\u8c03\u7528 process::"}, {"type": "arguments", "children": [{"type": "(", "children": [], "start_byte": 3757, "end_byte": 3758, "start_point": [91, 59], "end_point": [91, 60], "text": "e"}, {"type": ")", "children": [], "start_byte": 3758, "end_byte": 3759, "start_point": [91, 60], "end_point": [91, 61], "text": "x"}], "start_byte": 3757, "end_byte": 3759, "start_point": [91, 59], "end_point": [91, 61], "text": "ex"}], "start_byte": 3734, "end_byte": 3759, "start_point": [91, 36], "end_point": [91, 61], "text": "// \u8c03\u7528\u51fd\u6570\u5e76\u671f\u5f85\u5b83\u8c03\u7528 process::ex"}, {"type": ")", "children": [], "start_byte": 3759, "end_byte": 3760, "start_point": [91, 61], "end_point": [91, 62], "text": "i"}], "start_byte": 3733, "end_byte": 3760, "start_point": [91, 35], "end_point": [91, 62], "text": " // \u8c03\u7528\u51fd\u6570\u5e76\u671f\u5f85\u5b83\u8c03\u7528 process::exi"}], "start_byte": 3710, "end_byte": 3760, "start_point": [91, 12], "end_point": [91, 62], "text": "g\");\n        }\n\n        // \u8c03\u7528\u51fd\u6570\u5e76\u671f\u5f85\u5b83\u8c03\u7528 process::exi"}, {"type": ";", "children": [], "start_byte": 3760, "end_byte": 3761, "start_point": [91, 62], "end_point": [91, 63], "text": "t"}], "start_byte": 3710, "end_byte": 3761, "start_point": [91, 12], "end_point": [91, 63], "text": "g\");\n        }\n\n        // \u8c03\u7528\u51fd\u6570\u5e76\u671f\u5f85\u5b83\u8c03\u7528 process::exit"}, {"type": "expression_statement", "children": [{"type": "call_expression", "children": [{"type": "field_expression", "children": [{"type": "identifier", "children": [], "start_byte": 3774, "end_byte": 3782, "start_point": [92, 12], "end_point": [92, 20], "text": "_ = std:"}, {"type": ".", "children": [], "start_byte": 3782, "end_byte": 3783, "start_point": [92, 20], "end_point": [92, 21], "text": ":"}, {"type": "field_identifier", "children": [], "start_byte": 3783, "end_byte": 3798, "start_point": [92, 21], "end_point": [92, 36], "text": "panic::catch_un"}], "start_byte": 3774, "end_byte": 3798, "start_point": [92, 12], "end_point": [92, 36], "text": "_ = std::panic::catch_un"}, {"type": "arguments", "children": [{"type": "(", "children": [], "start_byte": 3798, "end_byte": 3799, "start_point": [92, 36], "end_point": [92, 37], "text": "w"}, {"type": "call_expression", "children": [{"type": "field_expression", "children": [{"type": "identifier", "children": [], "start_byte": 3799, "end_byte": 3814, "start_point": [92, 37], "end_point": [92, 52], "text": "ind(|| {\n      "}, {"type": ".", "children": [], "start_byte": 3814, "end_byte": 3815, "start_point": [92, 52], "end_point": [92, 53], "text": " "}, {"type": "field_identifier", "children": [], "start_byte": 3815, "end_byte": 3823, "start_point": [92, 53], "end_point": [92, 61], "text": "     cle"}], "start_byte": 3799, "end_byte": 3823, "start_point": [92, 37], "end_point": [92, 61], "text": "ind(|| {\n            cle"}, {"type": "arguments", "children": [{"type": "(", "children": [], "start_byte": 3823, "end_byte": 3824, "start_point": [92, 61], "end_point": [92, 62], "text": "a"}, {"type": ")", "children": [], "start_byte": 3824, "end_byte": 3825, "start_point": [92, 62], "end_point": [92, 63], "text": "n"}], "start_byte": 3823, "end_byte": 3825, "start_point": [92, 61], "end_point": [92, 63], "text": "an"}], "start_byte": 3799, "end_byte": 3825, "start_point": [92, 37], "end_point": [92, 63], "text": "ind(|| {\n            clean"}, {"type": ")", "children": [], "start_byte": 3825, "end_byte": 3826, "start_point": [92, 63], "end_point": [92, 64], "text": "_"}], "start_byte": 3798, "end_byte": 3826, "start_point": [92, 36], "end_point": [92, 64], "text": "wind(|| {\n            clean_"}], "start_byte": 3774, "end_byte": 3826, "start_point": [92, 12], "end_point": [92, 64], "text": "_ = std::panic::catch_unwind(|| {\n            clean_"}, {"type": ";", "children": [], "start_byte": 3826, "end_byte": 3827, "start_point": [92, 64], "end_point": [92, 65], "text": "u"}], "start_byte": 3774, "end_byte": 3827, "start_point": [92, 12], "end_point": [92, 65], "text": "_ = std::panic::catch_unwind(|| {\n            clean_u"}, {"type": "expression_statement", "children": [{"type": "call_expression", "children": [{"type": "field_expression", "children": [{"type": "identifier", "children": [], "start_byte": 3840, "end_byte": 3849, "start_point": [93, 12], "end_point": [93, 21], "text": ";\n       "}, {"type": ".", "children": [], "start_byte": 3849, "end_byte": 3850, "start_point": [93, 21], "end_point": [93, 22], "text": " "}, {"type": "field_identifier", "children": [], "start_byte": 3850, "end_byte": 3865, "start_point": [93, 22], "end_point": [93, 37], "text": "});\n    }\n}\n"}], "start_byte": 3840, "end_byte": 3865, "start_point": [93, 12], "end_point": [93, 37], "text": ";\n        });\n    }\n}\n"}, {"type": "arguments", "children": [{"type": "(", "children": [], "start_byte": 3865, "end_byte": 3866, "start_point": [93, 37], "end_point": [93, 38], "text": ""}, {"type": "string_literal", "children": [{"type": "\"", "children": [], "start_byte": 3866, "end_byte": 3868, "start_point": [93, 38], "end_point": [93, 40], "text": ""}, {"type": "\"", "children": [], "start_byte": 3877, "end_byte": 3878, "start_point": [93, 49], "end_point": [93, 50], "text": ""}], "start_byte": 3866, "end_byte": 3878, "start_point": [93, 38], "end_point": [93, 50], "text": ""}, {"type": ")", "children": [], "start_byte": 3878, "end_byte": 3879, "start_point": [93, 50], "end_point": [93, 51], "text": ""}], "start_byte": 3865, "end_byte": 3879, "start_point": [93, 37], "end_point": [93, 51], "text": ""}], "start_byte": 3840, "end_byte": 3879, "start_point": [93, 12], "end_point": [93, 51], "text": ";\n        });\n    }\n}\n"}, {"type": ";", "children": [], "start_byte": 3879, "end_byte": 3880, "start_point": [93, 51], "end_point": [93, 52], "text": ""}], "start_byte": 3840, "end_byte": 3880, "start_point": [93, 12], "end_point": [93, 52], "text": ";\n        });\n    }\n}\n"}, {"type": "}", "children": [], "start_byte": 3889, "end_byte": 3890, "start_point": [94, 8], "end_point": [94, 9], "text": ""}], "start_byte": 3570, "end_byte": 3890, "start_point": [86, 15], "end_point": [94, 9], "text": "put_filename.as_bytes());\n            OUT_NAME.copy_from_slice(output_filename.as_bytes());\n            PROG_NAME.copy_from_slice(b\"test_prog\");\n        }\n\n        // \u8c03\u7528\u51fd\u6570\u5e76\u671f\u5f85\u5b83\u8c03\u7528 process::exit\n        let _ = std::panic::catch_unwind(|| {\n            clean_up_and_fail(3);\n        });\n    }\n}\n"}], "start_byte": 3563, "end_byte": 3890, "start_point": [86, 8], "end_point": [94, 9], "text": "lice(input_filename.as_bytes());\n            OUT_NAME.copy_from_slice(output_filename.as_bytes());\n            PROG_NAME.copy_from_slice(b\"test_prog\");\n        }\n\n        // \u8c03\u7528\u51fd\u6570\u5e76\u671f\u5f85\u5b83\u8c03\u7528 process::exit\n        let _ = std::panic::catch_unwind(|| {\n            clean_up_and_fail(3);\n        });\n    }\n}\n"}], "start_byte": 3563, "end_byte": 3890, "start_point": [86, 8], "end_point": [94, 9], "text": "lice(input_filename.as_bytes());\n            OUT_NAME.copy_from_slice(output_filename.as_bytes());\n            PROG_NAME.copy_from_slice(b\"test_prog\");\n        }\n\n        // \u8c03\u7528\u51fd\u6570\u5e76\u671f\u5f85\u5b83\u8c03\u7528 process::exit\n        let _ = std::panic::catch_unwind(|| {\n            clean_up_and_fail(3);\n        });\n    }\n}\n"}, {"type": "line_comment", "children": [], "start_byte": 3900, "end_byte": 3947, "start_point": [96, 8], "end_point": [96, 55], "text": ""}, {"type": "let_declaration", "children": [{"type": "let", "children": [], "start_byte": 3956, "end_byte": 3959, "start_point": [97, 8], "end_point": [97, 11], "text": ""}, {"type": "_", "children": [], "start_byte": 3960, "end_byte": 3961, "start_point": [97, 12], "end_point": [97, 13], "text": ""}, {"type": "=", "children": [], "start_byte": 3962, "end_byte": 3963, "start_point": [97, 14], "end_point": [97, 15], "text": ""}, {"type": "call_expression", "children": [{"type": "scoped_identifier", "children": [{"type": "scoped_identifier", "children": [{"type": "identifier", "children": [], "start_byte": 3964, "end_byte": 3967, "start_point": [97, 16], "end_point": [97, 19], "text": ""}, {"type": "::", "children": [], "start_byte": 3967, "end_byte": 3969, "start_point": [97, 19], "end_point": [97, 21], "text": ""}, {"type": "identifier", "children": [], "start_byte": 3969, "end_byte": 3974, "start_point": [97, 21], "end_point": [97, 26], "text": ""}], "start_byte": 3964, "end_byte": 3974, "start_point": [97, 16], "end_point": [97, 26], "text": ""}, {"type": "::", "children": [], "start_byte": 3974, "end_byte": 3976, "start_point": [97, 26], "end_point": [97, 28], "text": ""}, {"type": "identifier", "children": [], "start_byte": 3976, "end_byte": 3988, "start_point": [97, 28], "end_point": [97, 40], "text": ""}], "start_byte": 3964, "end_byte": 3988, "start_point": [97, 16], "end_point": [97, 40], "text": ""}, {"type": "arguments", "children": [{"type": "(", "children": [], "start_byte": 3988, "end_byte": 3989, "start_point": [97, 40], "end_point": [97, 41], "text": ""}, {"type": "closure_expression", "children": [{"type": "closure_parameters", "children": [{"type": "|", "children": [], "start_byte": 3989, "end_byte": 3990, "start_point": [97, 41], "end_point": [97, 42], "text": ""}, {"type": "|", "children": [], "start_byte": 3990, "end_byte": 3991, "start_point": [97, 42], "end_point": [97, 43], "text": ""}], "start_byte": 3989, "end_byte": 3991, "start_point": [97, 41], "end_point": [97, 43], "text": ""}, {"type": "block", "children": [{"type": "{", "children": [], "start_byte": 3992, "end_byte": 3993, "start_point": [97, 44], "end_point": [97, 45], "text": ""}, {"type": "expression_statement", "children": [{"type": "call_expression", "children": [{"type": "identifier", "children": [], "start_byte": 4006, "end_byte": 4023, "start_point": [98, 12], "end_point": [98, 29], "text": ""}, {"type": "arguments", "children": [{"type": "(", "children": [], "start_byte": 4023, "end_byte": 4024, "start_point": [98, 29], "end_point": [98, 30], "text": ""}, {"type": "integer_literal", "children": [], "start_byte": 4024, "end_byte": 4025, "start_point": [98, 30], "end_point": [98, 31], "text": ""}, {"type": ")", "children": [], "start_byte": 4025, "end_byte": 4026, "start_point": [98, 31], "end_point": [98, 32], "text": ""}], "start_byte": 4023, "end_byte": 4026, "start_point": [98, 29], "end_point": [98, 32], "text": ""}], "start_byte": 4006, "end_byte": 4026, "start_point": [98, 12], "end_point": [98, 32], "text": ""}, {"type": ";", "children": [], "start_byte": 4026, "end_byte": 4027, "start_point": [98, 32], "end_point": [98, 33], "text": ""}], "start_byte": 4006, "end_byte": 4027, "start_point": [98, 12], "end_point": [98, 33], "text": ""}, {"type": "}", "children": [], "start_byte": 4036, "end_byte": 4037, "start_point": [99, 8], "end_point": [99, 9], "text": ""}], "start_byte": 3992, "end_byte": 4037, "start_point": [97, 44], "end_point": [99, 9], "text": ""}], "start_byte": 3989, "end_byte": 4037, "start_point": [97, 41], "end_point": [99, 9], "text": ""}, {"type": ")", "children": [], "start_byte": 4037, "end_byte": 4038, "start_point": [99, 9], "end_point": [99, 10], "text": ""}], "start_byte": 3988, "end_byte": 4038, "start_point": [97, 40], "end_point": [99, 10], "text": ""}], "start_byte": 3964, "end_byte": 4038, "start_point": [97, 16], "end_point": [99, 10], "text": ""}, {"type": ";", "children": [], "start_byte": 4038, "end_byte": 4039, "start_point": [99, 10], "end_point": [99, 11], "text": ""}], "start_byte": 3956, "end_byte": 4039, "start_point": [97, 8], "end_point": [99, 11], "text": ""}, {"type": "}", "children": [], "start_byte": 4044, "end_byte": 4045, "start_point": [100, 4], "end_point": [100, 5], "text": ""}], "start_byte": 3419, "end_byte": 4045, "start_point": [81, 41], "end_point": [100, 5], "text": "ELETE_OUTPUT_ON_INTERRUPT = false;\n            OP_MODE = 1;\n            SRC_MODE = 1;\n            VERBOSITY = 1;\n            IN_NAME.copy_from_slice(input_filename.as_bytes());\n            OUT_NAME.copy_from_slice(output_filename.as_bytes());\n            PROG_NAME.copy_from_slice(b\"test_prog\");\n        }\n\n        // \u8c03\u7528\u51fd\u6570\u5e76\u671f\u5f85\u5b83\u8c03\u7528 process::exit\n        let _ = std::panic::catch_unwind(|| {\n            clean_up_and_fail(3);\n        });\n    }\n}\n"}], "start_byte": 3382, "end_byte": 4045, "start_point": [81, 4], "end_point": [100, 5], "text": "\u8bbe\u7f6e\u5168\u5c40\u53d8\u91cf\n        unsafe {\n            DELETE_OUTPUT_ON_INTERRUPT = false;\n            OP_MODE = 1;\n            SRC_MODE = 1;\n            VERBOSITY = 1;\n            IN_NAME.copy_from_slice(input_filename.as_bytes());\n            OUT_NAME.copy_from_slice(output_filename.as_bytes());\n            PROG_NAME.copy_from_slice(b\"test_prog\");\n        }\n\n        // \u8c03\u7528\u51fd\u6570\u5e76\u671f\u5f85\u5b83\u8c03\u7528 process::exit\n        let _ = std::panic::catch_unwind(|| {\n            clean_up_and_fail(3);\n        });\n    }\n}\n"}, {"type": "}", "children": [], "start_byte": 4046, "end_byte": 4047, "start_point": [101, 0], "end_point": [101, 1], "text": ""}], "start_byte": 2278, "end_byte": 4047, "start_point": [47, 10], "end_point": [101, 1], "text": "test_delete_output_on_interrupt() {\n        let input_filename = \"test_input.txt\";\n        let output_filename = \"test_output.txt\";\n\n        // \u521b\u5efa\u4e00\u4e2a\u5047\u7684\u8f93\u5165\u6587\u4ef6\u548c\u8f93\u51fa\u6587\u4ef6\n        std::fs::File::create(input_filename).unwrap();\n        std::fs::File::create(output_filename).unwrap();\n\n        // \u8bbe\u7f6e\u5168\u5c40\u53d8\u91cf\n        unsafe {\n            DELETE_OUTPUT_ON_INTERRUPT = true;\n            OP_MODE = 1;\n            SRC_MODE = 3;\n            IN_NAME.copy_from_slice(input_filename.as_bytes());\n            OUT_NAME.copy_from_slice(output_filename.as_bytes());\n            PROG_NAME.copy_from_slice(b\"test_prog\");\n        }\n\n        // \u8c03\u7528\u51fd\u6570\u5e76\u5ffd\u7565\u8fd4\u56de\u503c\uff08\u56e0\u4e3a\u8be5\u51fd\u6570\u4e0d\u8fd4\u56de\uff09\n        let _ = std::panic::catch_unwind(|| {\n            clean_up_and_fail(1);\n        });\n\n        // \u786e\u4fdd\u8f93\u51fa\u6587\u4ef6\u5df2\u88ab\u5220\u9664\n        assert!(!std::path::Path::new(output_filename).exists());\n        std::fs::remove_file(input_filename).unwrap(); // \u6e05\u9664\u6d4b\u8bd5\u6587\u4ef6\n    }\n\n    #[test]\n    #[should_panic(expected = \"process::exit\")]\n    fn test_missing_input_file_warning() {\n        let input_filename = \"nonexistent_input.txt\";\n        let output_filename = \"test_output.txt\";\n\n        // \u8bbe\u7f6e\u5168\u5c40\u53d8\u91cf\n        unsafe {\n            DELETE_OUTPUT_ON_INTERRUPT = false;\n            OP_MODE = 1;\n            SRC_MODE = 1;\n            VERBOSITY = 1;\n            IN_NAME.copy_from_slice(input_filename.as_bytes());\n            OUT_NAME.copy_from_slice(output_filename.as_bytes());\n            PROG_NAME.copy_from_slice(b\"test_prog\");\n        }\n\n        // \u8c03\u7528\u51fd\u6570\u5e76\u671f\u5f85\u5b83\u8c03\u7528 process::exit\n        let _ = std::panic::catch_unwind(|| {\n            clean_up_and_fail(3);\n        });\n    }\n}\n"}], "start_byte": 2268, "end_byte": 4047, "start_point": [47, 0], "end_point": [101, 1], "text": "t]\n    fn test_delete_output_on_interrupt() {\n        let input_filename = \"test_input.txt\";\n        let output_filename = \"test_output.txt\";\n\n        // \u521b\u5efa\u4e00\u4e2a\u5047\u7684\u8f93\u5165\u6587\u4ef6\u548c\u8f93\u51fa\u6587\u4ef6\n        std::fs::File::create(input_filename).unwrap();\n        std::fs::File::create(output_filename).unwrap();\n\n        // \u8bbe\u7f6e\u5168\u5c40\u53d8\u91cf\n        unsafe {\n            DELETE_OUTPUT_ON_INTERRUPT = true;\n            OP_MODE = 1;\n            SRC_MODE = 3;\n            IN_NAME.copy_from_slice(input_filename.as_bytes());\n            OUT_NAME.copy_from_slice(output_filename.as_bytes());\n            PROG_NAME.copy_from_slice(b\"test_prog\");\n        }\n\n        // \u8c03\u7528\u51fd\u6570\u5e76\u5ffd\u7565\u8fd4\u56de\u503c\uff08\u56e0\u4e3a\u8be5\u51fd\u6570\u4e0d\u8fd4\u56de\uff09\n        let _ = std::panic::catch_unwind(|| {\n            clean_up_and_fail(1);\n        });\n\n        // \u786e\u4fdd\u8f93\u51fa\u6587\u4ef6\u5df2\u88ab\u5220\u9664\n        assert!(!std::path::Path::new(output_filename).exists());\n        std::fs::remove_file(input_filename).unwrap(); // \u6e05\u9664\u6d4b\u8bd5\u6587\u4ef6\n    }\n\n    #[test]\n    #[should_panic(expected = \"process::exit\")]\n    fn test_missing_input_file_warning() {\n        let input_filename = \"nonexistent_input.txt\";\n        let output_filename = \"test_output.txt\";\n\n        // \u8bbe\u7f6e\u5168\u5c40\u53d8\u91cf\n        unsafe {\n            DELETE_OUTPUT_ON_INTERRUPT = false;\n            OP_MODE = 1;\n            SRC_MODE = 1;\n            VERBOSITY = 1;\n            IN_NAME.copy_from_slice(input_filename.as_bytes());\n            OUT_NAME.copy_from_slice(output_filename.as_bytes());\n            PROG_NAME.copy_from_slice(b\"test_prog\");\n        }\n\n        // \u8c03\u7528\u51fd\u6570\u5e76\u671f\u5f85\u5b83\u8c03\u7528 process::exit\n        let _ = std::panic::catch_unwind(|| {\n            clean_up_and_fail(3);\n        });\n    }\n}\n"}], "start_byte": 0, "end_byte": 4048, "start_point": [0, 0], "end_point": [102, 0], "text": "use std::fs;\nuse std::io::{self, Write};\nuse std::os::unix::fs::MetadataExt;\nuse crate::bzip2::scc_90_root_52_setExit::*;\nuse crate::global_vars::bzip2_c5::*;\nuse crate::global_vars::bzip2_c1::*;\nuse crate::global_vars::bzip2_c2::*;\n\n\npub fn clean_up_and_fail(ec: i32) {\n    // unsafe {\n    //     // \u8bbf\u95ee\u5168\u5c40\u53d8\u91cf\n    //     let ret_val = fs::metadata(String::from_utf8_lossy(&IN_NAME)).is_ok() as i32;\n\n    //     if SRC_MODE == 3 && OP_MODE != 3 && DELETE_OUTPUT_ON_INTERRUPT {\n    //         if ret_val == 0 {\n    //             if VERBOSITY != 0 {\n    //                 eprintln!(\"{}: Deleting output file {}, if it exists.\", \n    //                     String::from_utf8_lossy(&PROG_NAME), String::from_utf8_lossy(&OUT_NAME));\n    //             }\n\n    //             // \u5047\u8bbe outputHandleJustInCase \u662f\u5168\u5c40\u7684 File \u7c7b\u578b\u53d8\u91cf\n    //             if let Ok(_) = fs::remove_file(String::from_utf8_lossy(&OUT_NAME)) {\n    //                 // \u6210\u529f\u5220\u9664\n    //             } else {\n    //                 eprintln!(\"{}: WARNING: deletion of output file (apparently) failed.\", \n    //                     String::from_utf8_lossy(&PROG_NAME));\n    //             }\n    //         } else {\n    //             eprintln!(\"{}: WARNING: deletion of output file suppressed\", String::from_utf8_lossy(&PROG_NAME));\n    //             eprintln!(\"{}:    since input file no longer exists.  Output file\", String::from_utf8_lossy(&PROG_NAME));\n    //             eprintln!(\"{}:    `{}` may be incomplete.\", String::from_utf8_lossy(&PROG_NAME), String::from_utf8_lossy(&OUT_NAME));\n    //             eprintln!(\"{}:    I suggest doing an integrity test (bzip2 -tv) of it.\", String::from_utf8_lossy(&PROG_NAME));\n    //         }\n    //     }\n\n    //     if VERBOSITY != 0 && NUM_FILE_NAMES > 0 && NUM_FILES_PROCESSED < NUM_FILE_NAMES {\n    //         eprintln!(\"{}: WARNING: some files have not been processed:\", String::from_utf8_lossy(&PROG_NAME));\n    //         eprintln!(\"{}:    {} specified on command line, {} not processed yet.\\n\", \n    //             String::from_utf8_lossy(&PROG_NAME), NUM_FILE_NAMES, NUM_FILE_NAMES - NUM_FILES_PROCESSED);\n    //     }\n\n    //     set_exit(EXIT_VALUE);\n    //     std::process::exit(EXIT_VALUE);\n    // }\n}\n#[cfg(test)]\nmod tests {\n    use super::*;\n\n    #[test]\n    fn test_delete_output_on_interrupt() {\n        let input_filename = \"test_input.txt\";\n        let output_filename = \"test_output.txt\";\n\n        // \u521b\u5efa\u4e00\u4e2a\u5047\u7684\u8f93\u5165\u6587\u4ef6\u548c\u8f93\u51fa\u6587\u4ef6\n        std::fs::File::create(input_filename).unwrap();\n        std::fs::File::create(output_filename).unwrap();\n\n        // \u8bbe\u7f6e\u5168\u5c40\u53d8\u91cf\n        unsafe {\n            DELETE_OUTPUT_ON_INTERRUPT = true;\n            OP_MODE = 1;\n            SRC_MODE = 3;\n            IN_NAME.copy_from_slice(input_filename.as_bytes());\n            OUT_NAME.copy_from_slice(output_filename.as_bytes());\n            PROG_NAME.copy_from_slice(b\"test_prog\");\n        }\n\n        // \u8c03\u7528\u51fd\u6570\u5e76\u5ffd\u7565\u8fd4\u56de\u503c\uff08\u56e0\u4e3a\u8be5\u51fd\u6570\u4e0d\u8fd4\u56de\uff09\n        let _ = std::panic::catch_unwind(|| {\n            clean_up_and_fail(1);\n        });\n\n        // \u786e\u4fdd\u8f93\u51fa\u6587\u4ef6\u5df2\u88ab\u5220\u9664\n        assert!(!std::path::Path::new(output_filename).exists());\n        std::fs::remove_file(input_filename).unwrap(); // \u6e05\u9664\u6d4b\u8bd5\u6587\u4ef6\n    }\n\n    #[test]\n    #[should_panic(expected = \"process::exit\")]\n    fn test_missing_input_file_warning() {\n        let input_filename = \"nonexistent_input.txt\";\n        let output_filename = \"test_output.txt\";\n\n        // \u8bbe\u7f6e\u5168\u5c40\u53d8\u91cf\n        unsafe {\n            DELETE_OUTPUT_ON_INTERRUPT = false;\n            OP_MODE = 1;\n            SRC_MODE = 1;\n            VERBOSITY = 1;\n            IN_NAME.copy_from_slice(input_filename.as_bytes());\n            OUT_NAME.copy_from_slice(output_filename.as_bytes());\n            PROG_NAME.copy_from_slice(b\"test_prog\");\n        }\n\n        // \u8c03\u7528\u51fd\u6570\u5e76\u671f\u5f85\u5b83\u8c03\u7528 process::exit\n        let _ = std::panic::catch_unwind(|| {\n            clean_up_and_fail(3);\n        });\n    }\n}\n"}